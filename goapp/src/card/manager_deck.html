<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<title>組牌風雲</title>
	<!--page information for search engine-->
	<meta name="title" content="組牌風雲" />
	<meta name="keyword" content="組牌風雲,卡牌風雲,三國志大戰,集換式卡牌,線上卡牌,虛擬桌面,組牌機" />
	<meta name="description" content="組牌風雲" />
	<link rel="image_src" href=""/>
	
	<!--share information for fb-->
	<meta property="og:description" content="組牌風雲" />
	<meta property="og:title" content="組牌風雲" />
	<meta property="og:url" content="http://particle-979.appspot.com/card/manager_sango.html#"/>
	<meta name="description" content="" />
	
	<link rel="stylesheet" type="text/css" href="../common/js/lib/jquery-easyui-1.4.3/themes/black/easyui.css">
	<link rel="stylesheet" type="text/css" href="../common/js/lib/jquery-easyui-1.4.3/themes/icon.css">
	<link rel="stylesheet" type="text/css" href="../common/css/normalize.css">
		
	<script type="text/javascript" src="../common/js/lib/leo.utils.js"></script>
	<script type="text/javascript" src="../common/js/lib/underscore/underscore-min.js"></script>
	<script type="text/javascript" src="../common/js/lib/jquery-easyui-1.4.3/jquery.min.js"></script>
	<script type="text/javascript" src="../common/js/lib/jquery-easyui-1.4.3/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="../common/js/lib/jquery/jquery.tmpl.min.js"></script>
	
</head>
<style>
body{
	position:absolute;
	top:0;
	left:0;
	width:100%;
	height:100%;
}
.group{
	position:relative;
	width:100%;
}
.hori{
	display:inline-block;
}

.card_item_root{
	position:relative;
	width:100%;
	height:60px;
	border:1px black solid;
}

.big_card_root{
	position:relative;
	display:inline-block;
	width:260px;
	height:390px;;
	cursor:pointer;
	border:1px black solid;
}

.big_card_root_focus{
	border:1px red solid;
}

#mc_lefttop{
	position:absolute; 
	right:5px; 
	top:0px;
}

@media screen and ( max-width:1366px ){
	#mc_lefttop{
		top:auto;
		bottom:0px;
	}
}

</style>

<script id="tmpl_bigCard" type="jquery-x-tmpl">
	<div cid=${id} class="big_card_root">
		<img style="position:absolute; left:0; top:0; width:100%; height:100%;" src="../common/images/card/cardback_0.png"/>
		<img src=${url} style="position:relative; top:0; left:0; width:100%; height:100%;" />
		<img style="position:absolute; left:0; top:0; width:100%; height:100%;" src="images/sampleTxt.png"/>
		<div id="mc_black" style="position:absolute; left:0; top:0;  width:100%; height:100%; background-color:black; opacity:.5;"></div>
		<div id="mc_detail" style="position:absolute; top:0; left:0; padding-left:50px; padding-right:10px; padding-top:10px; ">
			<div game="sangoWar">${id}</div>
			<div game="sangoWar">${cname}</div>
			<div game="sangoWar">${atype}/${atype2}</div>
			<div game="sangoWar">${ability}</div>
			<div game="sangoWar">${content}</div>
			<br/>
			<div game="sangoWar">${counter}</div>
			
			<div game="yugioh">${id}</div>
			<div game="yugioh">${name}</div>
			<div game="yugioh">level ${level}</div>
			<div game="yugioh">${type}</div>
			<div game="yugioh">${race}</div>
			<div game="yugioh">${desc}</div>
			
			<div game="magic">${id}</div>
			<div game="magic">${type}</div>
			<div game="magic">${text}</div>
			
			<div game="gundamWar">${id}</div>
			<div game="gundamWar">${name}</div>
			<div game="gundamWar">${ctype}</div>
			<div game="gundamWar">${area}</div>
			<div game="gundamWar">{{html context}}</div>
			
			<div game="army">${id}</div>
			<div game="army">${Name}</div>
			<div game="army">${Nation}</div>
			<div game="army">${Ctype}</div>
			<div game="army">${Atype}</div>
			<div game="army">${text}</div>
			 
			<div game="battleSpirits">${id}</div>
			<div game="battleSpirits">${info_2}/${info_41}</div>
			<div game="battleSpirits">系統: ${info_25}</div>
			<div game="battleSpirits">卡片種類: ${info_3}</div>
			<div game="battleSpirits">属性: ${info_4}${info_5}</div>
			<div game="battleSpirits">減輕需求: ${info_6}</div>
			<div game="battleSpirits">LV1 core: ${info_7} hp: ${info_8}</div>
			<div game="battleSpirits">LV2 core: ${info_9} hp: ${info_10}</div>
			<div game="battleSpirits">LV3 core: ${info_11} hp: ${info_12}</div>
			<div game="battleSpirits">中: {{html info_42}}</div>
			<div game="battleSpirits">日: {{html info_14}}</div>
			<div game="battleSpirits">稀有度: ${info_13}</div>
			
			<div game="crusade">${id}</div>
			<div game="crusade">${info_2}</div>
			<div game="crusade">${info_4}</div>
			<div game="crusade">${info_3}</div>
			<div game="crusade">${info_15}</div>
			<div game="crusade">${info_5}-${info_6}-${info_7}</div>
			<div game="crusade">{{html info_16}}</div>

			<div game="gundamWarN">${id}</div>
			<div game="gundamWarN">${info_2}</div>
			<div game="gundamWarN">{{html info_12}}</div>
			<div game="gundamWarN">${info_7}-${info_8}-${info_9}</div>
			
			<div game="dragonZ">{{html id}}</div>
			<div game="dragonZ">{{html name}}</div>
			<div game="dragonZ">{{html type}}</div>
			<div game="dragonZ">{{html descrition}}</div>
			<div game="dragonZ">{{html rarity}}</div>
		</div>
	</div>
</script>
<script id="tmpl_cardItem" type="jquery-x-tmpl">
	<div id=${itemId} cid=${id} class="card_item_root">
		<div class="hori" style="position:relative; top:0; left:0; height:100%; vertical-align:top;">
			<a id="btn_remove" href="#" class="easyui-linkbutton" style="width:30px; height:100%;" data-options="iconCls:'icon-remove'"></a>
		</div>
		<div class="hori" style="position:relative; top:0; left:0; height:100%; vertical-align:top;">
			<a id="btn_copy" href="#" class="easyui-linkbutton" style="width:30px; height:100%;" data-options="iconCls:'icon-add'"></a>
		</div>
		<div class="hori" style="position:relative; height:100%;">
			<img style="position:relative; left:0; top:0; height:100%;" src="../common/images/card/cardback_0.png"/>
			<img style="position:absolute; left:0; top:0; height:100%;" src=${url}  style="height:100%;" />
		</div>
		<div class="hori" style="overflow:hidden; width:150px; height:100%; vertical-align:top;">
			
			<div game="sangoWar">${cname}</div>
			<div game="sangoWar">${atype}/${atype2}</div>
			<div game="sangoWar">${ctype}</div>
			
			<div game="yugioh">${name}</div>
			<div game="yugioh">level ${level}</div>
			<div game="yugioh">${type}</div>

			<div game="magic">${id}</div>
			<div game="magic">${type}</div>
			
			<div game="gundamWar">${name}</div>
			<div game="gundamWar">${ctype}</div>
			<div game="gundamWar">${area}</div>

			<div game="gundamWarN">${name}</div>
			<div game="gundamWarN">${ctype}</div>
			<div game="gundamWarN">${area}</div>

			<div game="gundamWarN">${id}</div>
			<div game="gundamWarN">${info_2}</div>
			<div game="gundamWarN">${info_3}</div>
			
			<div game="army">${Name}</div>
			<div game="army">${Ctype}</div>
			<div game="army">${Atype}</div>
			
			<div game="battleSpirits">${info_2}</div>
			<div game="battleSpirits">${info_25}</div>
			<div game="battleSpirits">${info_3}</div>
			
			<div game="crusade">${info_2}</div>
			<div game="crusade">${info_3}</div>
			<div game="crusade">${info_5}-${info_6}-${info_7}</div>
			
			<div game="dragonZ">{{html id}}</div>
			<div game="dragonZ">{{html name}}</div>
			<div game="dragonZ">{{html type}}</div>
			<div game="dragonZ">{{html rarity}}</div>
		</div>
	</div>
</script>
<body>
	<div id="cc" class="easyui-layout" style="width:100%;height:100%;">
		<div data-options="region:'north',title:'條件',split:true" style="height:300px;">
			<div class="group" style="text-align:center; margin-top:10px;">
				<div class="group">
					<form id="form_container" name="form_value" class="hori">
						<!-- by script -->
					</form>
				</div>
				<div class="group">
					<div class="hori">
						<a id="btn_detail" href="#" class="easyui-linkbutton" style="width:60px; height:40px;" onclick="app.view.onTipClick()" data-options="iconCls:'icon-tip',toggle:true,selected:true">內文</a>
					</div>
					<div class="hori">
						<a id="btn" href="#" class="easyui-linkbutton" style="width:200px; height:40px;" onclick="app.view.onResetClick()" data-options="iconCls:'icon-edit'">重設</a>
					</div>
					<div class="hori">
						<a id="btn_search" href="#" class="easyui-linkbutton" style="width:200px; height:40px;" onclick="app.view.onSearchClick()" data-options="iconCls:'icon-search',disabled:true">搜尋</a>
					</div>
				</div>
				<div id="mc_lefttop" >
					<a id="btn_about" href="#" title="其它遊戲的組牌機，目前有三國志大戰、遊戲王、魔法風雲會、Crusade、戰魂、軍武gogogo" class="easyui-linkbutton easyui-tooltip" onclick="$('#dia_others').panel( 'open' )" data-options="iconCls:'icon-redo'">其它遊戲</a>
					<a id="btn_about" href="#" title="關於上善若水" class="easyui-linkbutton easyui-tooltip" onclick="$('#dia_about').panel( 'open' )" data-options="iconCls:'icon-help'"></a>
				</div>
			</div>
		</div>
		<div data-options="region:'center',title:'結果'">
			<div id="pag_bigCard" class="easyui-pagination" data-options="pageSize:15,layout:['first','links','last']"></div>
			<div id="mc_bigCardContainer" >
				
			</div>
		</div>
		<div data-options="region:'east',title:'組牌'" style="width:300px; overflow-x:hidden;">
			<div class="group" style="text-align:center; margin-top:10px;">
				<div class="hori">
					<span id="txt_count" style="color:yellow">0</span>張
				</div>
				<div class="hori">
					<div class="hori">
						<a id="btn" href="#" class="easyui-linkbutton" style="width:100px; height:40px;" onclick="app.view.onClearClick()" data-options="iconCls:'icon-remove'">清空</a>
					</div>
					<div class="hori">
						<a id="btn_output" href="#" class="easyui-linkbutton" style="width:100px; height:40px;" onclick="app.view.onSaveClick()" data-options="iconCls:'icon-save',disabled:true">匯入/匯出</a>
					</div>
				</div>
			</div>
			<div id="mc_cardContainer" class="group" style="margin-top:10px;">
				
			</div>
		</div>
	</div>
	<div id="win_output" class="easyui-window" title="匯入/匯出" data-options="minimizable:false,maximizable:false,collapsible:false,closed:true,modal:true" style="width:500px;height:300px" >
		<div class="group" style="text-align:center;">
			<input class="easyui-textbox" data-options="multiline:true" style="width:100%; height:200px">
			<div class="hori" style="margin-top:10px;">
				<a id="btn" href="#" title="歡迎大家加入哦" style="width:100px; height:40px;"  class="easyui-linkbutton easyui-tooltip" onclick="app.view.onGoToClubClick();">加入社團找牌咖</a>
				<a id="btn" href="#" title="匯入由此組牌機所輸出的文字來產生牌組" class="easyui-linkbutton easyui-tooltip" style="width:120px; height:40px;" onclick="app.view.onLoadClick()" data-options="iconCls:'icon-save'">匯入</a>
				<a id="btn_gotoSet" href="#" title="去上善若水app的首頁，登入並輸入由此組牌機所產生的文字，來新增自己的套牌" class="easyui-linkbutton easyui-tooltip" style="width:100px; height:40px;" onclick="app.view.onSetDeckClick()" data-options="iconCls:'icon-back'">去輸入牌組</a>
				<a id="btn_gotoGame" href="#" title="去卡牌風雲頁面使用臨時創建的功能，來測試由此組牌機所組出來的套牌" class="easyui-linkbutton easyui-tooltip" style="width:120px; height:40px;" onclick="app.view.onGotoGameClick()" data-options="iconCls:'icon-redo'">線上打牌去</a>
			</div>
		</div>
	</div>
	<div id="dia_about" class="easyui-dialog" title="卡牌風雲" data-options="iconCls:'icon-help',closed:true" style="padding:10px">
		<div class="group" style="position:relative; width:100%; text-align:center;">
			<div class="hori" >
				上善若水APP
				<br/>
				<img src="../common/images/logo.jpg" width="100" height="100">
				<br/>
				<a style="color:yellow" href="//www.facebook.com/pages/上善若水/1653920964852269" target="_blank">上善若水粉絲頁</a>
				<br/><br/>
				<a style="color:yellow" href="//particle-979.appspot.com/manager/index.html#" target="_blank">上善若水官網</a>
				<br/><br/>
				<a style="color:yellow" href="//www.facebook.com/groups/1521526761495948/" target="_blank">加入社團找牌咖</a>
				<br/><br/>
			</div>
		</div>
	</div>
	<div id="dia_others" class="easyui-dialog" title="組牌機列表" data-options="closed:true" style="padding:10px">
		<div class="group" style="position:relative; width:100%; text-align:center;">
			<div class="group">
				<div class="hori">
					<a id="btn_about" href="#" class="easyui-linkbutton" onclick="window.open('manager_deck.html?game=army')" style="width:150px;" data-options="iconCls:'icon-redo'">軍武gogogo</a>
				</div>
			</div>
			<div class="group">
				<div class="hori">
					<a id="btn_about" href="#" class="easyui-linkbutton" onclick="window.open('manager_deck.html?game=sangoWar')" style="width:150px;" data-options="iconCls:'icon-redo'">三國志大戰</a>
				</div>
			</div>
			<div class="group">
				<div class="hori">
					<a id="btn_about" href="#" class="easyui-linkbutton" onclick="window.open('manager_deck.html?game=gundamWar')" style="width:150px;" data-options="iconCls:'icon-redo'">鋼彈大戰</a>
				</div>
			</div>
			<div class="group">
				<div class="hori">
					<a id="btn_about" href="#" class="easyui-linkbutton" onclick="window.open('manager_deck.html?game=gundamWarN')" style="width:150px;" data-options="iconCls:'icon-redo'">鋼彈大戰NexA</a>
				</div>
			</div>

			<div class="group">
				<div class="hori">
					<a id="btn_about" href="#" class="easyui-linkbutton" onclick="window.open('manager_deck.html?game=magic')" style="width:150px;" data-options="iconCls:'icon-redo'">魔法風雲會</a>
				</div>
			</div>
			<div class="group">
				<div class="hori">
					<a id="btn_about" href="#" class="easyui-linkbutton" onclick="window.open('manager_deck.html?game=yugioh&lang=ch')" style="width:150px;" data-options="iconCls:'icon-redo'">遊戲王</a>
					<a id="btn_about" href="#" class="easyui-linkbutton" onclick="window.open('manager_deck.html?game=yugioh&lang=en')" style="width:150px;" data-options="iconCls:'icon-redo'">遊戲王(英)</a>
					<a id="btn_about" href="#" class="easyui-linkbutton" onclick="window.open('manager_deck.html?game=yugioh&lang=jp')" style="width:150px;" data-options="iconCls:'icon-redo'">遊戲王(日)</a>
				</div>
			</div>
			<div class="group">
				<div class="hori">
					<a id="btn_about" href="#" class="easyui-linkbutton" onclick="window.open('manager_deck.html?game=battleSpirits')" style="width:150px;" data-options="iconCls:'icon-redo'">戰魂</a>
				</div>
			</div>
			<div class="group">
				<div class="hori">
					<a id="btn_about" href="#" class="easyui-linkbutton" onclick="window.open('manager_deck.html?game=crusade')" style="width:150px;" data-options="iconCls:'icon-redo'">Crusade</a>
				</div>
			</div>
			<div class="group">
				<div class="hori">
					<a id="btn_about" href="#" class="easyui-linkbutton" onclick="window.open('manager_deck.html?game=dragonZ')" style="width:150px;" data-options="iconCls:'icon-redo'">七龍珠TCG</a>
				</div>
			</div>
		</div>
	</div>
	<script src="../common/js/lib/underscore/underscore-min.js"></script>
	<script src="../common/js/lib/async/async.js"></script>
	<script src="../common/js/lib/google/ga.js"></script>
	<script src="../common/js/lib/csv.js"></script>
	<script src="../common/js/lib/purl.js"></script>	
	<script src="../common/js/sangoWar.js"></script>	
	<script src="../common/js/yugioh.js"></script>	
	<script src="../common/js/magic.js"></script>	
	<script src="../common/js/gundamWar.js"></script>	
	<script src="../common/js/gundamWarN.js"></script>	
	<script src="../common/js/army.js"></script>	
	<script src="../common/js/battleSpirits.js"></script>	
	<script src='../common/js/crusade.js'></script>
	<script src='../common/js/dragonZ.js'></script>
	<script src="../common/js/cardsearch.js"></script>	
	<script src="../common/js/admin.js"></script>	
	<script src='js/api.js'></script>
	<script src="js/manager_deck_gameController.js"></script>
	<script>
	googleTracking.init( 'UA-55273266-3' );
	
		  /*
		  <!--
					<option value="ZDK">ZDK</option>
					<option value="CFX">CFX</option>
					<option value="LW">LW</option>
					<option value="CSTD">CSTD</option>
					<option value="FD">FD</option>
					<option value="PS">PS</option>
					<option value="NE">NE</option>
					<option value="P3K">P3K</option>
					<option value="WL">WL</option>
					<option value="HL">HL</option>
					<option value="IA">IA</option>
					<option value="RV">RV</option>
					<option value="AQ">AQ</option>
					<option value="BE">BE</option>
					-->
		*/
		
		/*
			<div game="battleSpirits">系統: ${info_25}</div>
			<div game="battleSpirits">卡片種類: ${info_3}</div>
			<div game="battleSpirits">属性: ${info_4}${info_5}</div>
			<div game="battleSpirits">減輕需求: ${info_6}</div>
			<div game="battleSpirits">LV1 core: ${info_7} hp: ${info_8}</div>
			<div game="battleSpirits">LV2 core: ${info_9} hp: ${info_10}</div>
			<div game="battleSpirits">LV3 core: ${info_11} hp: ${info_12}</div>
			<div game="battleSpirits">${info_42}</div>
			<div game="battleSpirits">稀有度: ${info_13}</div>
			*/
			
	var tmplAry = {
		gundamWarN:{
			default:[
				[	{type:'label', val:'勢力'},
					{type:'select', span:5, val:{name:'ntype', items:['茶','白','青','紫','緑','赤','黒']}},
					{type:'label',val:'卡片種類'},
					{type:'select',span:5,val:{name:'ctype', items:['G','UNIT','CHARACTER','COMMAND','OPERATION', 'ACE']}}],
				[	{type:'label', val:'指定cost以上'},
					{type:'select', span:2,val:{name:'cost_1', items:['1','2','3','4']}},
					{type:'label',val:'指定cost以下'},
					{type:'select', span:2, val:{name:'cost_2', items:['1','2','3','4']}},
					{type:'label', val:'合計cost以上'},
					{type:'select', span:2,val:{name:'costAll_1', items:['1','2','3','4','5','6','7','8','9']}},
					{type:'label',val:'合計cost以下'},
					{type:'select', span:2, val:{name:'costAll_2', items:['1','2','3','4','5','6','7','8','9']}}],
				[	{type:'label', val:'格鬥以上'},
					{type:'select', span:1,val:{name:'atk_1', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'格鬥以下'},
					{type:'select', span:1,val:{name:'atk_2', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'射擊以上'},
					{type:'select', span:1,val:{name:'atk2_1', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'射擊以下'},
					{type:'select', span:1,val:{name:'atk2_2', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'防守以上'},
					{type:'select', span:1,val:{name:'def_1', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'防守以下'},
					{type:'select', span:1,val:{name:'def_2', items:["0","1","2","3","4","5","6","7","8","9"]}}],
				[	{type:'label', val:'區域'},
					{type:'select', span:11,val:{name:'area', items:["宇宙","地球","宇宙/地球"]}}],
				[	{type:'label', val:'特殊規則'},
				{type:'checkbox', span:11,val:{name:'', items:
				["高機動","速攻","強襲","サイコミュ","範囲兵器","ゲイン","改装","共有","供給","クロスウェポン","PS装甲","クイック","戦闘配備","ステイ","ユニーク"]}}]
				,
				[	{type:'label', val:'卡片名稱檢索'},
					{type:'textbox', span:11,val:{name:'card_name'}}],
				[	{type:'label', val:'卡片規則檢索'},
					{type:'textbox', span:11,val:{name:'rule'}}],
				[	{type:'label', val:'id檢索'},
					{type:'textbox', span:11,val:{name:'cid'}}]
			]
		},
		dragonZ:{
			default: [
				[{type:'label', val:'id'}, {type:'textbox', span:3,val:{name:'id'}}],
				[{type:'label', val:'color'}, {type:'select', span:3,val:{name:'color', items:['Black','Blue','Orange','Red','Namekian','Saiyan','Freestyle']}}],
				[{type:'label', val:'name'}, {type:'textbox', span:3,val:{name:'name'}}],
				[{type:'label', val:'type'}, {type:'select', span:3,val:{name:'type', items:['Ally','Dragon Ball','Drill','Energy','Event','mastery','MP','Physical','Setup']}}],
				[
					{type:'label', val:'energy'},{type:'select',val:{name:'cost', items:['1','2','3','4']}}
				],
				[
					{type:'label', val:'damage'},{type:'select',val:{name:'damage', items:['1','2','3','4','5','6','7']}}
				],
				[{type:'label', val:'description'}, {type:'textbox', span:3,val:{name:'description'}}]
			]
		},
		crusade:{
			default:[
				[
					{type:'label', val:'系列'},
					{type:'select2', span:5, val:{name:'set', items:[
					//	['22','サンライズクルセイド'],
					//	['77','マクロスクルセイド'],
					//	['150','ボンズクルセイド'],
						['123','ダイナミッククルセイド'],
						['86','OGクルセイド'],
						['193','聖闘士星矢'],
					//	['198','アクエリオンシリーズ'],
					//	['206','聖闘士星矢Ω'],
					//	['209','非公認戦隊アキバレンジャー'],
						['221','るろうに剣心-明治剣客浪漫譚-'],
					//	['222','ガイナックスシリーズ'],
					//	['225','ジョジョの奇妙な冒険'],
					//	['227','マギ'],
						['235','幽☆遊☆白書'],
						['240','クルセイドジーベック'],
					//	['251','銀河機攻隊マジェスティックプリンス'],
					//	['254','フルメタル・パニック！'],
					//	['262','モーレツ宇宙海賊'],
					//	['279','魔法騎士レイアース']
					]}},
					{type:'label', val:'特徵'},
					{type:'textbox', span:5, val:{name:'symbol'}}
				],
				[	{type:'label', val:'勢力'},
					{type:'select', span:5, val:{name:'ntype', items:['青','紫','緑','赤','黒']}},
					{type:'label',val:'卡片種類'},
					{type:'select',span:5,val:{name:'ctype', items:['ユニット','キャラクター','コマンド']}}],
				[	{type:'label', val:'指定cost以上'},
					{type:'select', span:2,val:{name:'cost_1', items:['1','2','3','4']}},
					{type:'label',val:'指定cost以下'},
					{type:'select', span:2, val:{name:'cost_2', items:['1','2','3','4']}},
					{type:'label', val:'合計cost以上'},
					{type:'select', span:2,val:{name:'costAll_1', items:['1','2','3','4','5','6','7','8','9']}},
					{type:'label',val:'合計cost以下'},
					{type:'select', span:2, val:{name:'costAll_2', items:['1','2','3','4','5','6','7','8','9']}}],
				[	{type:'label', val:'格鬥以上'},
					{type:'select', span:1,val:{name:'atk_1', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'格鬥以下'},
					{type:'select', span:1,val:{name:'atk_2', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'射擊以上'},
					{type:'select', span:1,val:{name:'atk2_1', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'射擊以下'},
					{type:'select', span:1,val:{name:'atk2_2', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'防守以上'},
					{type:'select', span:1,val:{name:'def_1', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'防守以下'},
					{type:'select', span:1,val:{name:'def_2', items:["0","1","2","3","4","5","6","7","8","9"]}}],
				[	{type:'label', val:'特殊規則'},
					{type:'checkbox', span:11,val:{name:'', items:["エース","高機動","強襲","速攻","戦闘配備","クイック","ブースト","装填","鉄壁","武装変更","連動","高速戦闘","リンク","パートナー","聖闘士","激励","ペイン","セイバーシステム","改造","超合金","対価","共振","共鳴","剣客","根性","サウンドフォース","バックアップ","歌手","歌","精神コマンド","別名"]}}],
				[	{type:'label', val:'卡片名稱檢索'},
					{type:'textbox', span:11,val:{name:'card_name'}}],
				[	{type:'label', val:'卡片規則檢索'},
					{type:'textbox', span:11,val:{name:'rule'}}],
				[	{type:'label', val:'id檢索'},
					{type:'textbox', span:11,val:{name:'cid'}}]
			]
		},
		battleSpirits:{
			default:[
				[
					{type:'label', val:'系列'},
					{type:'select2', span:11, val:{name:'set', items:[
						['62003','BS01'],
						['62007','BS02【激翔】'],
						['62008','BS03【覇闘】'],
						['62009','BS04【龍帝】'],
						['62010','BS05【皇騎】'],
						['62012','BS06【爆神】'],
						['62014','BS07【天醒】'],
						['62015','BS08【戦嵐】'],
						['62017','BS09【超星】'],
						['62020','BS10 星座編 第1弾 【八星龍降臨】'],
						['62021','BS11 星座編 第2弾 【灼熱の太陽】'],
						['62022','BS12 星座編 第3弾 【月の咆哮】'],
						['62023','BS13 星座編 第4弾 【星空の王者】'],
						['62025','BS14 覇王編 第1弾 【英雄龍の伝説】'],
						['62026','BS15 覇王編 第2弾 【黄金の大地】'],
						['62027','BS16 覇王編 第3弾 【爆烈の覇道】'],
						['62028','BS17 覇王編 第4弾 【剣舞う世界】'],
						['62029','BS18 覇王編 第5弾 【覇王大決戦】'],
						['62032','BS19 剣刃編 第1弾【聖剣時代】'],
						['62037','BS20 剣刃編 第2弾【乱剣戦記】'],
						['62038','BS21 剣刃編 第3弾【光輝剣武】'],
						['62040','BS22 剣刃編 第4弾【暗黒刃翼】'],
						['62041','BS23 剣刃編 第5弾【剣刃神話】'],
						['62045','BS24 アルティメットバトル01'],
						['62049','BS25 アルティメットバトル02'],
						['62051','BS26 アルティメットバトル03'],
						['62055','BS27 アルティメットバトル04'],
						['62057','BS28 アルティメットバトル05'],
						['62060','BS29 アルティメットバトル06'],
						['62063','BS30 アルティメットバトル07'],
						['62068','BS31 烈火伝 第1章'],
						['62071','BS32 烈火伝 第2章'],
						['62073','BS33 烈火伝 第3章'],
						['62019','BSC05'],
						['62046','BSC15 バーストインパクト'],
						['62050','BSC16 女神達の調べ'],
						['62056','BSC17 眩き究極の王者'],
						['62064','BSC18 詩姫の交響曲'],
						['62065','BSC19 東宝怪獣大決戦'],
						['62069','BSC20 激闘！戦国15ノ陣'],
						['62072','BSC21 オールキラブースター 名刀コレクション'],
						['62011','SD01'],
						['62013','SD02'],
						['62018','SD03'],
						['62024','SD06'],
						['62030','SD10'],
						['62031','SD11'],
						['62033','SD13'],
						['62034','SD14'],
						['62035','SD15'],
						['62036','SD16'],
						['62039','SD17'],
						['62043','SD19'],
						['62044','SD20'],
						['62047','SD22'],
						['62048','SD23'],
						['62053','SD24'],
						['62054','SD25'],
						['62059','SD26'],
						['62061','SD27'],
						['62062','SD28'],
						['62066','SD29'],
						['62067','SD30'],
						['62070','SD31'],
						['62075','SD32'],
						['62016','EXカード'],
						['62074','リミテッドパック烈火伝'],
						['62058','リミテッドパック三龍神エディション'],
						['62052','リミテッドパック2014'],
						['62042','リミテッドパックMAX2013'],
						['62901','プロモーションカード'],
					]}},
				],
				[
					{type:'label', val:'lv1核以上'},
					{type:'select', span:1, val:{name:'lv1_core_1', items:['1','2']}},
					{type:'label', val:'lv1核以下'},
					{type:'select', span:1, val:{name:'lv1_core_2', items:['1','2']}},
					{type:'label', val:'lv2核以上'},
					{type:'select', span:1, val:{name:'lv2_core_1', items:['1','2','3','4','5','6','7','8']}},
					{type:'label', val:'lv2核以下'},
					{type:'select', span:1, val:{name:'lv2_core_2', items:['1','2','3','4','5','6','7','8']}},
					{type:'label', val:'lv3核以上'},
					{type:'select', span:1, val:{name:'lv3_core_1', items:['1','2','3','4','5','6','7','8','9','10']}},
					{type:'label', val:'lv3核以下'},
					{type:'select', span:1, val:{name:'lv3_core_2', items:['1','2','3','4','5','6','7','8','9','10']}}
				],
				[
					{type:'label', val:'lv1血以上'},
					{type:'select', span:1, val:{name:'lv1_hp_1', items:['1000','2000','3000','4000','5000','6000','7000','8000','9000']}},
					{type:'label', val:'lv1血以下'},
					{type:'select', span:1, val:{name:'lv1_hp_2', items:['1000','2000','3000','4000','5000','6000','7000','8000','9000']}},
					{type:'label', val:'lv2血以上'},
					{type:'select', span:1, val:{name:'lv2_hp_1', items:['1000','2000','3000','4000','5000','6000','7000','8000','9000','10000','11000','12000','13000','14000','15000']}},
					{type:'label', val:'lv2血以下'},
					{type:'select', span:1, val:{name:'lv2_hp_2', items:['1000','2000','3000','4000','5000','6000','7000','8000','9000','10000','11000','12000','13000','14000','15000']}},
					{type:'label', val:'lv3血以上'},
					{type:'select', span:1, val:{name:'lv3_hp_1', items:['1000','2000','3000','4000','5000','6000','7000','8000','9000','10000','11000','12000','13000','14000','15000','16000','17000','18000','19000','20000']}},
					{type:'label', val:'lv3血以下'},
					{type:'select', span:1, val:{name:'lv3_hp_2', items:['1000','2000','3000','4000','5000','6000','7000','8000','9000','10000','11000','12000','13000','14000','15000','16000','17000','18000','19000','20000']}},
				],
				[
					{type:'label', val:'属性'},
					{type:'select', span:1, val:{name:'attr', items:['赤','緑','紫','白','黄','青']}},
					{type:'label', val:'需求以上'},
					{type:'select', span:1, val:{name:'cost_1', items:['1','2','3','4','5','6','7','8','9','10','11','12']}},
					{type:'label', val:'需求以下'},
					{type:'select', span:1, val:{name:'cost_2', items:['1','2','3','4','5','6','7','8','9','10','11','12']}},
					{type:'label', val:'種類'},
					{type:'select', span:1, val:{name:'ctype', items:['スピリット','ブレイヴ','ネクサス','マジック','アルティメット']}},
					{type:'label', val:'系統'},
					{type:'select', span:1, val:{name:'ctype2', items:['道化','漂精','戦騎','龍帝','竜騎','虚神','神将','翼竜','皇獣','地竜','空牙','竜人','古竜','爬獣','溶魚','機竜','星竜','魔神','幽魔','妖蛇','魔影','霊獣','夜族','無魔','呪鬼','冥主','爪鳥','樹魔','歌鳥','遊精','怪虫','剣獣','殻虫','殻人','光虫','甲獣','巨獣','空魚','氷姫','甲竜','機獣','動器','機人','武装','魔人','天霊','楽族','四道','想獣','動玩','戯狩','小玩','闘神','勇傑','創手','獣頭','異合','造兵','戦獣','光導','神星','星魂','導魔','道玩','戦竜','雄将','覇皇','海首','華兵','放浪者','絶晶神','交渉人','星文学者','菓族','剣使','剣刃','滅龍','竜騎士','六楯帝','新生','刃虫','詩姫','翼船','護将','調査員','次代','私服','衣装','三龍神','星将','極竜','先導者','極女王','武竜','戦極','主君','家臣','忍風','機巧','妖戒','戦姫','起導者','天魔王']}},
					{type:'label', val:'稀有度'},
					{type:'select', span:1, val:{name:'rare', items:['C','U','R','M','X','XX','P','PX','EX','SJ','KA','KF','PB','CP','LM']}}
					
				],
				[{type:'label', val:'卡片名稱檢索'},{type:'textbox', span:11,val:{name:'card_name'}}],
				[{type:'label', val:'卡片規則檢索'},{type:'textbox', span:11,val:{name:'rule'}}],
				[{type:'label', val:'id檢索'},{type:'textbox', span:11,val:{name:'id'}}]
			]
		},
		yugioh:{
			ch:[
				[
					{type:'label', val:'星級以上'},
					{type:'select', span:3, val:{name:'level_1', items:['1','2','3','4','5','6','7','8','9','10','11','12']}},
					{type:'label', val:'星級以下'},
					{type:'select', span:3, val:{name:'level_2', items:['1','2','3','4','5','6','7','8','9','10','11','12']}}
				],
				[
					{type:'label', val:'元素屬性'},
					{type:'select', span:1, val:{name:'attr', items:['地','水','炎','風','光','闇','神']}},
					{type:'label', val:'種族'},
					{type:'select', span:1, val:{name:'race', items:['戰士','魔法使','天使','惡魔','不死','機械','水','炎','岩石','鳥獸','植物','昆蟲','雷','龍','獸','獸戰士','恐龍','魚','海龍','爬蟲類','超能','幻神獸','創造神','幻龍']}},
					{type:'label', val:'卡片種類'},
					{type:'select', span:1, val:{name:'ctype', items:['怪獸','魔法','陷阱']}},
					{type:'label', val:'招喚種類'},
					{type:'select', span:1, val:{name:'ctype2', items:['通常','效果','融合','儀式','陷阱怪獸','靈魂','聯合','二重','協調','同步','代幣','速攻','永續','裝備','場地','反擊','反轉','卡通','超量','靈擺']}}
				],
				[
					{type:'label', val:'攻擊力以上'},{type:'select', val:{name:'atk_1', items:['500','1000','1500','2000','2500','3000','3500','4000','4500','5000']}},
					{type:'label', val:'攻擊力以下'},{type:'select', val:{name:'atk_2', items:['500','1000','1500','2000','2500','3000','3500','4000','4500','5000']}},
					{type:'label', val:'防守力以上'},{type:'select', val:{name:'def_1', items:['500','1000','1500','2000','2500','3000','3500','4000','4500','5000']}},
					{type:'label', val:'防守力以下'},{type:'select', val:{name:'def_2', items:['500','1000','1500','2000','2500','3000','3500','4000','4500','5000']}}
				],
				[	{type:'label', val:'左擺蕩以上'},{type:'select', val:{name:'lscale_1', items:['1','2','3','4','5','6','7','8','9','10']}},
					{type:'label', val:'左擺蕩以下'},{type:'select', val:{name:'lscale_2', items:['1','2','3','4','5','6','7','8','9','10']}},
					{type:'label', val:'右擺蕩以上'},{type:'select', val:{name:'rscale_1', items:['1','2','3','4','5','6','7','8','9','10']}},
					{type:'label', val:'右擺蕩以下'},{type:'select', val:{name:'rscale_2', items:['1','2','3','4','5','6','7','8','9','10']}}],
				[{type:'label', val:'卡片名稱檢索'},{type:'textbox', span:11,val:{name:'card_name'}}],
				[{type:'label', val:'卡片規則檢索'},{type:'textbox', span:11,val:{name:'rule'}}],
				[{type:'label', val:'id檢索'},{type:'textbox', span:7,val:{name:'id'}}]
			],
			jp:[
				[
					{type:'label', val:'レベル以上'},
					{type:'select', span:3, val:{name:'level_1', items:['1','2','3','4','5','6','7','8','9','10','11','12']}},
					{type:'label', val:'レベル以下'},
					{type:'select', span:3, val:{name:'level_2', items:['1','2','3','4','5','6','7','8','9','10','11','12']}}
				],
				[
					{type:'label', val:'属性'},
					{type:'select', span:1, val:{name:'attr', items:['地','水','炎','風','光','闇','神']}},
					{type:'label', val:'種族'},
					{type:'select', span:1, val:{name:'race', items:['戦士族','魔法使い族','天使族','悪魔族','アンデット族','機械族','水族','炎族','岩石族','鳥獣族','植物族','昆虫族','雷族','ドラゴン族','獣族','獣戦士族','恐竜族','魚族','海竜族','爬虫類族','サイキック族','幻神獣族','創造神族','幻竜族']}},
					{type:'label', val:'カード種類'},
					{type:'select', span:1, val:{name:'ctype', items:['モンスター','魔法','罠']}},
					{type:'label', val:'召喚種類'},
					{type:'select', span:1, val:{name:'ctype2', items:['通常','効果','融合','儀式','罠モンスター','スピリット','ユニオン','デュアル','チューナー','シンクロ','トークン','速攻','永続','装備','フィールド','カウンター','リバース','トゥーン','エクシーズ','ペンデュラム']}}
				],
				[
					{type:'label', val:'攻撃力以上'},{type:'select', val:{name:'atk_1', items:['500','1000','1500','2000','2500','3000','3500','4000','4500','5000']}},
					{type:'label', val:'攻撃力以下'},{type:'select', val:{name:'atk_2', items:['500','1000','1500','2000','2500','3000','3500','4000','4500','5000']}},
					{type:'label', val:'守備力以上'},{type:'select', val:{name:'def_1', items:['500','1000','1500','2000','2500','3000','3500','4000','4500','5000']}},
					{type:'label', val:'守備力以下'},{type:'select', val:{name:'def_2', items:['500','1000','1500','2000','2500','3000','3500','4000','4500','5000']}}
				],
				[	{type:'label', val:'左擺蕩以上'},{type:'select', val:{name:'lscale_1', items:['1','2','3','4','5','6','7','8','9','10']}},
					{type:'label', val:'左擺蕩以下'},{type:'select', val:{name:'lscale_2', items:['1','2','3','4','5','6','7','8','9','10']}},
					{type:'label', val:'右擺蕩以上'},{type:'select', val:{name:'rscale_1', items:['1','2','3','4','5','6','7','8','9','10']}},
					{type:'label', val:'右擺蕩以下'},{type:'select', val:{name:'rscale_2', items:['1','2','3','4','5','6','7','8','9','10']}}],
				[{type:'label', val:'カード名'},{type:'textbox', span:11,val:{name:'card_name'}}],
				[{type:'label', val:'カードルール'},{type:'textbox', span:11,val:{name:'rule'}}],
				[{type:'label', val:'カードID'},{type:'textbox', span:7,val:{name:'id'}}]
			],
			en:[
				[
					{type:'label', val:'Level以上'},
					{type:'select', span:3, val:{name:'level_1', items:['1','2','3','4','5','6','7','8','9','10','11','12']}},
					{type:'label', val:'Level以下'},
					{type:'select', span:3, val:{name:'level_2', items:['1','2','3','4','5','6','7','8','9','10','11','12']}}
				],
				[
					{type:'label', val:'Attribute'},
					{type:'select', span:1, val:{name:'attr', items:['Earth','Water','Fire','Wind','Light','Dark','Divine']}},
					{type:'label', val:'Race'},
					{type:'select', span:1, val:{name:'race', items:['Warrior','Spellcaster','Fairy','Fiend','Zombie','Machine','Aqua','Pyro','Rock','Winged Beast','Plant','Insect','Thunder','Dragon','Beast','Beast-Warrior','Dinosaur','Fish','Sea Serpent','Reptile','Psychic','Divine-Beast','Creator God','Wyrm']}},
					{type:'label', val:'Card Type'},
					{type:'select', span:1, val:{name:'ctype', items:['Monster','Spell','Trap']}},
					{type:'label', val:'Summon Type'},
					{type:'select', span:1, val:{name:'ctype2', items:['Normal','Effect','Fusion','Ritual','Trap Monsters','Spirit','Union','Gemini','Tuner','Synchro','Token','Quick-Play','Continuous','Equip','Field','Counter','Flip','Toon','Xyz','Pendulum']}}
				],
				[
					{type:'label', val:'Attack以上'},{type:'select', val:{name:'atk_1', items:['500','1000','1500','2000','2500','3000','3500','4000','4500','5000']}},
					{type:'label', val:'Attack以下'},{type:'select', val:{name:'atk_2', items:['500','1000','1500','2000','2500','3000','3500','4000','4500','5000']}},
					{type:'label', val:'Deffence以上'},{type:'select', val:{name:'def_1', items:['500','1000','1500','2000','2500','3000','3500','4000','4500','5000']}},
					{type:'label', val:'Deffence以下'},{type:'select', val:{name:'def_2', items:['500','1000','1500','2000','2500','3000','3500','4000','4500','5000']}}
				],
				[	{type:'label', val:'Left Scale以上'},{type:'select', val:{name:'lscale_1', items:['1','2','3','4','5','6','7','8','9','10']}},
					{type:'label', val:'Left Scale以下'},{type:'select', val:{name:'lscale_2', items:['1','2','3','4','5','6','7','8','9','10']}},
					{type:'label', val:'Right Scale以上'},{type:'select', val:{name:'rscale_1', items:['1','2','3','4','5','6','7','8','9','10']}},
					{type:'label', val:'Right Scale以下'},{type:'select', val:{name:'rscale_2', items:['1','2','3','4','5','6','7','8','9','10']}}],
				[{type:'label', val:'Card Name'},{type:'textbox', span:11,val:{name:'card_name'}}],
				[{type:'label', val:'Card Rule'},{type:'textbox', span:11,val:{name:'rule'}}],
				[{type:'label', val:'Card Id'},{type:'textbox', span:7,val:{name:'id'}}]
			]
		},
		magic:{
			'default':[
				[
					{type:'label', val:'白以上'},{type:'select', val:{name:'white_1', items:['1','2','3','4','5']}},
					{type:'label', val:'白以下'},{type:'select', val:{name:'white_2', items:['0','1','2','3','4','5']}},
					{type:'label', val:'藍以上'},{type:'select', val:{name:'blue_1', items:['1','2','3','4','5']}},
					{type:'label', val:'藍以下'},{type:'select', val:{name:'blue_2', items:['0','1','2','3','4','5']}},
					{type:'label', val:'綠以上'},{type:'select', val:{name:'green_1', items:['1','2','3','4','5']}},
					{type:'label', val:'綠以下'},{type:'select', val:{name:'green_2', items:['0','1','2','3','4','5']}}
				],
				[
					{type:'label', val:'紅以上'},{type:'select', val:{name:'red_1', items:['1','2','3','4','5']}},
					{type:'label', val:'紅以下'},{type:'select', val:{name:'red_2', items:['0','1','2','3','4','5']}},
					{type:'label', val:'黑以上'},{type:'select', val:{name:'black_1', items:['1','2','3','4','5']}},
					{type:'label', val:'黑以下'},{type:'select', val:{name:'black_2', items:['0','1','2','3','4','5']}},
					{type:'label', val:'總cost以上'},{type:'select', val:{name:'all_1', items:['0','1','2','3','4','5','6','7','8','9','10']}},
					{type:'label', val:'總cost以下'},{type:'select', val:{name:'all_2', items:['0','1','2','3','4','5','6','7','8','9','10']}}
				],
				[
					{type:'label', val:'系列'},
					{type:'select', span:2, val:{name:'set', items:["4E","5E","6E","7E","8E","9E","10E","ALA","ALP","AVR","ARB","AP","AL","AN","BNG","BFZ","BOK","C13","C14","C15","CNS","CMD","CS","CHK","CHR","DTK","DGM","DKA","DI","DS","DK","KTK","JU","JOU","MR","MOR","MBS","MI","MM","MM2","MMA","M10","M11","M12","M13","M14","M15","EXP","EVE","EX","FRF","FE","FUT","ORI","ON","OD","GTC","GP","THS","TS","TO","TP","PC","PC2","PTK","PO","PO2","PR","NPH","ISD","IN","SHM","SOM","SOK","SC","SH","S99","RTR","ROE","RAV","WWK","LE","UN","UD","UL","US","VI","LG"]}},
					{type:'label', val:'基本種類'},
					{type:'select', span:2, val:{name:'ctype', items:['Basic','Legendary']}},
					{type:'label', val:'種類'},
					{type:'select', span:2, val:{name:'ctype2', items:['Land','Creature','Instant','Sorcery','Enchantment','Artifact','Artifact Creature']}},
					{type:'label', val:'子種類'},
					{type:'select', span:2, val:{name:'ctype3', items:['Advisor','Ally','Angel','Antelope','Ape','Archer','Archon','Artificer','Assassin','Assembly - Worker','Atog','Aurochs','Avatar','Badger','Barbarian','Basilisk','Bat','Bear','Beast','Beeble','Berserker','Bird','Blinkmoth','Boar','Bringer','Brushwagg','Camarid','Camel','Caribou','Carrier','Cat','Centaur','Cephalid','Chimera','Citizen','Cleric','Cockatrice','Construct','Coward','Crab','Crocodile','Cyclops','Dauthi','Demon','Deserter','Devil','Djinn','Dragon','Drake','Dreadnought','Drone','Druid','Dryad','Dwarf','Efreet','Elder','Eldrazi','Elemental','Elephant','Elf','Elk','Eye','Faerie','Ferret','Fish','Flagbearer','Fox','Frog','Fungus','Gargoyle','Germ','Giant','Gnome','Goat','Goblin','God','Golem','Gorgon','Graveborn','Gremlin','Griffin','Hag','Harpy','Hellion','Hippo','Hippogriff','Homarid','Homunculus','Horror','Horse','Hound','Human','Hydra','Hyena','Illusion','Imp','Incarnation','Insect','Jellyfish','Juggernaut','Kavu','Kirin','Kithkin','Knight','Kobold','Kor','Kraken','Lamia','Lammasu','Leech','Leviathan','Lhurgoyf','Licid','Lizard','Manticore','Masticore','Mercenary','Merfolk','Metathran','Minion','Minotaur','Monger','Mongoose','Monk','Moonfolk','Mutant','Myr','Mystic','Naga','Nautilus','Nephilim','Nightmare','Nightstalker','Ninja','Noggle','Nomad','Nymph','Octopus','Ogre','Ooze','Orb','Orc','Orgg','Ouphe','Ox','Oyster','Pegasus','Pentavite','Pest','Phelddagrif','Phoenix','Pincher','Pirate','Plant','Praetor','Prism','Processor','Rabbit','Rat','Rebel','Reflection','Rhino','Rigger','Rogue','Sable','Salamander','Samurai','Sand','Saproling','Satyr','Scarecrow','Scion','Scorpion','Scout','Serf','Serpent','Shade','Shaman','Shapeshifter','Sheep','Siren','Skeleton','Slith','Sliver','Slug','Snake','Soldier','Soltari','Spawn','Specter','Spellshaper','Sphinx','Spider','Spike','Spirit','Splinter','Sponge','Squid','Squirrel','Starfish','Surrakar','Survivor','Tetravite','Thalakos','Thopter','Thrull','Treefolk','Triskelavite','Troll','Turtle','Unicorn','Vampire','Vedalken','Viashino','Volver','Wall','Warrior','Weird','Werewolf','Whale','Wizard','Wolf','Wolverine','Wombat','Worm','Wraith','Wurm','Yeti','Zombie','Zubera']}}
				],
				[	{type:'label', val:'攻擊力以上'},
					{type:'select', span:2, val:{name:'atk_1', items:['0','1','2','3','4','5','6','7','8','9']}},
					{type:'label', val:'攻擊力以下'},
					{type:'select', span:2, val:{name:'atk_2', items:['0','1','2','3','4','5','6','7','8','9']}},
					{type:'label', val:'防守力以上'},
					{type:'select', span:2, val:{name:'def_1', items:['0','1','2','3','4','5','6','7','8','9']}},
					{type:'label', val:'防守力以下'},
					{type:'select', span:2, val:{name:'def_2', items:['0','1','2','3','4','5','6','7','8','9']}}],
				[{type:'label', val:'能力'},{type:'checkbox', span:11,val:{name:'', items:["Deathtouch","Defender","First strike","Double strike","Flash","Flying","Haste","Hexproof","Protection from white","Protection from blue","Protection from black","Protection from red","Protection from green","Reach","Trample","Vigilance"]}}],
				[{type:'label', val:'卡片名稱檢索'},{type:'textbox', span:11,val:{name:'card_name'}}],
				[{type:'label', val:'卡片規則檢索'},{type:'textbox', span:11,val:{name:'rule'}}]
			]
		},
		army:{
			'default':[
				[
					{type:'label', val:'勢力'},{type:'select', span:1, val:{name:'ntype', items:['資本','共產','人民']}},
					{type:'label',val:'國家'},{type:'select',span:1,val:{name:'nation', items:['中國','美國','英國','德國','日本','韓國','俄羅斯','以色列']}},
					{type:'label', val:'卡片'},{type:'select', span:1,val:{name:'ctype', items:['部隊','建築','戰術']}},
					{type:'label',val:'兵器'},{type:'select', span:1, val:{name:'atype', items:['戰鬥機','攻擊機','戰鬥攻擊機','戰略轟炸機','支援機','直升機','坦克','裝甲車','士兵','對空炮','自走炮','戰略火炮']}}
				],
				[
					{type:'label', val:'科技力以上'},{type:'select', span:1,val:{name:'tech_1', items:['1','2','3','4']}},
					{type:'label',val:'科技力以下'},{type:'select', span:1, val:{name:'tech_2', items:['1','2','3','4']}},
					{type:'label', val:'cost以上'},{type:'select', span:1,val:{name:'cost_1', items:['1','2','3','4','5','6']}},
					{type:'label',val:'cost以下'},{type:'select', span:1, val:{name:'cost_2', items:['1','2','3','4','5','6']}}
				],
				[{type:'label', val:'生產速度以上'},{type:'select', span:3,val:{name:'build_1', items:['1','2','3']}},{type:'label',val:'生產速度以下'},{type:'select', span:3, val:{name:'build_2', items:['1','2','3']}}],
				[{type:'label', val:'陸'},{type:'select',val:{name:'pland', items:['不可','扺抗','精通']}},{type:'label',val:'空'},{type:'select', val:{name:'psky', items:['不可','扺抗','精通']}},{type:'label', val:'兵'},{type:'select',val:{name:'psoilder', items:['不可','扺抗','精通']}},{type:'label',val:'城'},{type:'select', val:{name:'pcity', items:['不可','扺抗','精通']}}],
				[{type:'label', val:'速度'},{type:'select',span:7,val:{name:'speed', items:['0','1','2','3']}}],
				[{type:'label', val:'能力'},{type:'checkbox', span:7,val:{name:'', items:['遠距','軍力減損','進駐','掃蕩','防塔','煙霧彈','偵察','警戒','全偵','遠距','區域攻擊','維修','複合式裝甲','突襲','回收','暱蹤','超高速','核子引擎','雷射護盾','火焰兵器','生化兵器','ECM兵器','重點建物']}}],
				[{type:'label', val:'卡片名稱檢索'},{type:'textbox', span:7,val:{name:'card_name'}}],
				[{type:'label', val:'卡片規則檢索'},{type:'textbox', span:7,val:{name:'rule'}}],
				[{type:'label', val:'id檢索'},{type:'textbox', span:7,val:{name:'id'}}]
			]
		},
		gundamWar:{
			'default':[
				[	{type:'label', val:'勢力'},
					{type:'select', span:5, val:{name:'ntype', items:['茶','藍','紫','白','綠','紅','黑']}},
					{type:'label',val:'卡片種類'},
					{type:'select',span:5,val:{name:'ctype', items:['G','unit','character','command','operation', 'ACE']}}],
				[	{type:'label', val:'指定cost以上'},
					{type:'select', span:2,val:{name:'cost_1', items:['1','2','3','4']}},
					{type:'label',val:'指定cost以下'},
					{type:'select', span:2, val:{name:'cost_2', items:['1','2','3','4']}},
					{type:'label', val:'合計cost以上'},
					{type:'select', span:2,val:{name:'costAll_1', items:['1','2','3','4','5','6','7','8','9']}},
					{type:'label',val:'合計cost以下'},
					{type:'select', span:2, val:{name:'costAll_2', items:['1','2','3','4','5','6','7','8','9']}}],
				[	{type:'label', val:'格鬥以上'},
					{type:'select', span:1,val:{name:'atk_1', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'格鬥以下'},
					{type:'select', span:1,val:{name:'atk_2', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'射擊以上'},
					{type:'select', span:1,val:{name:'atk2_1', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'射擊以下'},
					{type:'select', span:1,val:{name:'atk2_2', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'防守以上'},
					{type:'select', span:1,val:{name:'def_1', items:["0","1","2","3","4","5","6","7","8","9"]}},
					{type:'label', val:'防守以下'},
					{type:'select', span:1,val:{name:'def_2', items:["0","1","2","3","4","5","6","7","8","9"]}}],
				[	{type:'label', val:'區域'},
					{type:'select', span:11,val:{name:'area', items:["宇宙","地球","宇宙/地球"]}}],
				[	{type:'label', val:'特殊規則'},
					{type:'checkbox', span:11,val:{name:'', items:["１張限制","預防","快速","PS裝甲","強襲","速攻","回收","宙間戰鬥","大氣圈突入","範圍兵器","感應式兵器","高機動","砂漠","水","輪胎","變形","特殊盾","支援","據點","殖民地","艦船","補給","配置/X","家名","艦船用修正","解體","複數","換裝","變化","共有"]}}],
				[	{type:'label', val:'卡片名稱檢索'},
					{type:'textbox', span:11,val:{name:'card_name'}}],
				[	{type:'label', val:'卡片規則檢索'},
					{type:'textbox', span:11,val:{name:'rule'}}],
				[	{type:'label', val:'id檢索'},
					{type:'textbox', span:11,val:{name:'cid'}}]
			]
		},
		sangoWar:{
			'default':[
				[	{type:'label', val:'勢力'},
					{type:'select', span:3, val:{name:'ntype', items:['蜀','魏','呉','漢','群','他']}},
					{type:'label',val:'卡片種類'},
					{type:'select',span:3,val:{name:'ctype', items:['武将','武将/兵隊','計略','キャンペーン']}}],
				[	{type:'label', val:'指定cost以上'},
					{type:'select', span:1,val:{name:'cost_1', items:['1','2','3','4','5']}},
					{type:'label',val:'指定cost以下'},
					{type:'select', span:1, val:{name:'cost_2', items:['1','2','3','4','5']}},
					{type:'label', val:'合計cost以上'},
					{type:'select', span:1,val:{name:'costAll_1', items:['1','2','3','4','5','6','7','8','9','10']}},
					{type:'label',val:'合計cost以下'},
					{type:'select', span:1, val:{name:'costAll_2', items:['1','2','3','4','5','6','7','8','9','10']}}
				],
				[	{type:'label', val:'武力以上'},
					{type:'select', span:3,val:{name:'power_1', items:['500','1000','1500','2000','2500','3000','3500','4000','4500']}},
					{type:'label',val:'武力以下'},
					{type:'select', span:3, val:{name:'power_2', items:['500','1000','1500','2000','2500','3000','3500','4000','4500']}}],
				[	{type:'label', val:'攻城'},
					{type:'select', span:1,val:{name:'acity', items:['1','2']}},
					{type:'label',val:'兵種'},
					{type:'select', span:1, val:{name:'atype', items:['槍兵','騎兵','弓兵','歩兵','象兵']}},
					{type:'label', val:'特徵'},
					{type:'select',span:3,val:{name:'symbol', items:['計略/戦闘','計略/メイン','女性','南蛮・女性','魏五将','仙人','五虎将','軍師','黄巾','兵隊','旗本四天王','君主','賢女','西園八校尉','十常侍']}}
				],
				[	{type:'label', val:'特殊規則'},
					{type:'checkbox', span:7,val:{name:'', items:["長槍","貫通","乱舞","奇襲","回避","先駆","走射","支援","連弩","戦象","強進","突撃","威圧","決起","憂国","国防","募兵","外交","伏兵","援軍","防柵","補佐","舞闘","覚醒","同盟"]}}],
				[	{type:'label', val:'卡片名稱檢索'},
					{type:'textbox', span:7,val:{name:'card_name'}}],
				[	{type:'label', val:'卡片規則檢索'},
					{type:'textbox', span:7,val:{name:'rule'}}],
				[	{type:'label', val:'id檢索'},
					{type:'textbox', span:7,val:{name:'id'}}]
			]
		}
		
	}
	
	function parseToTable( data ){
		var table = $('<table border="1"></table>' );
		_.each( data, function( items ){
			var trdiv = $('<tr></tr>');
			_.each( items, function( item ){
				var tddiv = $('<td></td>' );
				tddiv.css('text-align', 'center' );
				var type = item.type;
				var val = item.val;
				var span = item.span;
				if( span != undefined ){
					tddiv.attr( 'colspan', span );
				}
				
				switch( type ){
					case 'label': 
						tddiv.html( val ); 
						tddiv.css( 'width', '100px' );
						break;
					case 'select':
						var selname = val.name;
						var items = val.items;
						var seldiv = $('<select name="' + selname + '"></select>');
						seldiv.css('width', '100%' );
						seldiv.append( '<option></option>');
						_.each( items, function( s ){
							seldiv.append( '<option>' + s + '</option>');
						});
						tddiv.append( seldiv );
						break;
					case 'select2':
						var selname = val.name;
						var items = val.items;
						var seldiv = $('<select name="' + selname + '"></select>');
						seldiv.css('width', '100%' );
						seldiv.append( '<option></option>');
						_.each( items, function( ary_s ){
							seldiv.append( '<option value="' + ary_s[0] + '">' + ary_s[1] + '</option>');
						});
						tddiv.append( seldiv );
						break;
					case 'checkbox':
						var items = val.items;
						_.each( items, function( s ){
							var chkdiv = '<input type="checkbox" name="' + s + '" />' + s;
							tddiv.append( chkdiv );
						});
						break;
					case 'textbox':
						var textname = val.name;
						var textdiv = $('<input type="text" name="' + textname + '"/>');
						textdiv.css('width', '99%' );
						tddiv.append( textdiv );
				}
				
				trdiv.append( tddiv );
			});
			table.append( trdiv );
		});
		return table;
	}
	
	var game = (function( hashobj ){
		if( hashobj.game == undefined ) return 'sangoWar';
		return hashobj.game
	})( leo.utils.getHash() );
	
	if( game != 'army' ){
		$('#btn_gotoGame' ).hide();
		$('#btn_gotoSet' ).hide();
	}
	
	var titlemapping = {
		sangoWar:'三國志大戰',
		army:'軍武gogogo',
		yugioh:'遊戲王',
		magic:'魔法風雲會',
		gundamWar:'鋼彈大戰',
		gundamWarN:'鋼彈大戰NexA',
		battleSpirits: '戰魂',
		crusade: 'Crusade',
		dragonZ: '七龍珠TCG'
	}
	$('title').html(titlemapping[game] + '-組牌風雲' );
	
	
	var lang = leo.utils.getHash().lang
	var tmplName = game
	if( lang ){
		tmplName = [tmplName, lang].join('_')
	}else{
		lang = 'default';
	}
	
	var cardlist;
	var itemId = 0;
	var form_container = $('#form_container' );
	var tmpl_form = $('#tmpl_' + tmplName + 'Form' );
	
	form_container.append( parseToTable( tmplAry[game][lang] ) );
	gameController.loadCardData( game, lang, onLoadGameCallback );
	
	$.messager.progress({text:'讀取資料中…'}); 
	
	function onLoadGameCallback( err, _cardlist ){
		//console.log( _cardlist );
		cardlist = _cardlist;
		$("#btn_search").linkbutton( 'enable' );
		$("#btn_output").linkbutton( 'enable' );
		
		$.messager.progress( 'close' ); 
		
		app.view.searchCards();
	}
	
	function getId(){
		return itemId++;
	}
	
	function handleResponse( cb ) {
		return function ( err, ret ) {
			if ( err != null ) {
				alert( '錯誤:' + err );
			}else {
				cb( ret );
			}
		}
	}
	
	var app = app || {};
	app.view = app.view || {};
	
	(function( module ){
		var mc_bigCardContainer = $('#mc_bigCardContainer' );
		var win_output = $('#win_output' );
		var mc_cardContainer = $('#mc_cardContainer' );
		var txt_count = $('#txt_count' );
		var pag_bigCard = $('#pag_bigCard' );
		var currentPage = 0;
		var ary_cards;
		var ary_deck = [];
		
		function createBigCard(){
			if( ary_cards == undefined ) return; 
			mc_bigCardContainer.empty();
			
			var sid = currentPage * 15;
			var eid = currentPage * 15 + 15;
			
			if( eid > ary_cards.length ){
				eid = ary_cards.length;
			}
			
			var showCards = ary_cards.slice( sid, eid );
			_.each( showCards, function( card ){
				card.url = gameController.getCardUrl( game, card );
				if( card.url == undefined ) {
					card.url = 'images/cardback.png';
				}
				
				var div = $("#tmpl_bigCard").tmpl( card );
				div.find( 'div[game]' ).hide();
				div.find( 'div[game=' + game + ']' ).show();
				div.attr( 'data', JSON.stringify( card ));
				div.click( function(){
					var thisDom = $(this);
					outFocusAll();
					thisDom.addClass( 'big_card_root_focus' );
					pushToDeck( JSON.parse( thisDom.attr( 'data' ) ));
				});
				mc_bigCardContainer.append( div );
			});
			showHideDetail();
			
			function outFocusAll(){
				mc_bigCardContainer.find( 'div' ).removeClass( 'big_card_root_focus' );
			}
		}
		
		function setDeck(){
			
			var oldtop = mc_cardContainer.parent().scrollTop();
			mc_cardContainer.empty();
			
			ary_deck.sort( function( aobj, bobj ){
				switch( game ){
					case 'sangoWar':
						return aobj.cname.localeCompare( bobj.cname );
					default:
						return aobj.id.localeCompare( bobj.id );
				}
			});
			
			txt_count.html( ary_deck.length );
			
			_.each( ary_deck, function( card ){
				var cardItem = $("#tmpl_cardItem" ).tmpl( card );
				cardItem.find( 'div[game]' ).hide();
				cardItem.find( 'div[game=' + game + ']' ).show();
				mc_cardContainer.append( cardItem );
				
				cardItem.find( '#btn_remove' ).linkbutton( {
					onClick:function(){
						var removeId = $(this ).parent().parent().attr( 'id' );
						removeCardFromDeck( removeId );	
						setDeck();
					}
				});
				
				cardItem.find( '#btn_copy' ).linkbutton( {
					onClick:function(){
						var addId = $(this ).parent().parent().attr( 'id' );
						coptyCardFromDeck( addId );
					}
				});
				
				cardItem.click( function(){
					var showId = $( this ).attr( 'id' );
					searchCardFromDeck( showId );
				});
			});
			
			if( oldtop != 0 ){
				mc_cardContainer.parent().scrollTop( oldtop );
			}
			
		}
		
		function removeCardFromDeck( itemId ){
			var removeItem = _.find( ary_deck, function( cardItem ){
				return cardItem.itemId == itemId;
			});
			ary_deck.splice( ary_deck.indexOf( removeItem ), 1 );
		}
		
		function coptyCardFromDeck( itemId ){
			var beCopyItem = _.find( ary_deck, function( cardItem ){
				return cardItem.itemId == itemId;
			});
			
			var copyItem = JSON.parse( JSON.stringify( beCopyItem ) );
			copyItem.itemId = getId();
			
			ary_deck.push( copyItem );
			setDeck();
		}
		
		function searchCardFromDeck( itemId ){
			var searchCard = _.find( ary_deck, function( cardItem ){
				return cardItem.itemId == itemId;
			});
			searchCards( 'cid=' + searchCard.id );
		}
		
		function pushToDeck( card ){
			var copyCard = JSON.parse( JSON.stringify( card ) );
			copyCard.itemId = getId();
			ary_deck.push( copyCard );
			setDeck();
		}
		
		function onSearchClick(){
			googleTracking.click( 'onSearchClick' );
			searchCards( $( document.form_value ).serialize() );
		}
		
		var showTip = true;
		function onTipClick(){
			googleTracking.click( 'onTipClick' );
			showTip = !showTip;
			showHideDetail();
		}
		
		function showHideDetail(){
			if( showTip ){
				mc_bigCardContainer.find('#mc_detail > div[game=' + game + ']').show();
				mc_bigCardContainer.find('.big_card_root > #mc_black').show();
			}else{
				mc_bigCardContainer.find('#mc_detail > div[game=' + game + ']').hide();
				mc_bigCardContainer.find('.big_card_root > #mc_black').hide();
			}
		}
		
		function searchCards( searchstr ){
		
			
			currentPage = 0;
			pag_bigCard.pagination( 'select', 1 );
			
			ary_cards = searchLib( searchstr ).slice();
			
			//console.log( ary_cards );
			
			createBigCard();
			setPagination( ary_cards.length );
		}
		
		
		
		function searchLib( str ){
			var fns = gameController.getQueryStr( game, str );
			return cardsearch.search( fns, cardlist );
		}
		
		function setPagination( total ){
			pag_bigCard.pagination({ total : total, onSelectPage : function(pageNumber,pageSize) {
				currentPage = pageNumber - 1;
				if( currentPage < 0 ) currentPage = 0;
				createBigCard();
			}});
		}
		
		function onClearClick(){
			googleTracking.click( 'onClearClick' );
			ary_deck = [];
			mc_cardContainer.empty();
			setDeck();
		}
		
		function onSaveClick(){
			googleTracking.click( 'onSaveClick' );
			win_output.window('open' );
			var ary_new = _.map( ary_deck, function( card ){
				switch( game ){
				default:
					return card.id
				case 'sangoWar':
					return sangoWar.formatKey( card.id );
				}
			});
			var outputstr = JSON.stringify( ary_new );
			outputstr = outputstr.substr( 1, outputstr.length - 2 );
			win_output.find( '.easyui-textbox' ).textbox( 'setText', outputstr);
		}
		
		function onLoadClick(){
			googleTracking.click( 'onLoadClick' );
			var str = win_output.find( '.easyui-textbox' ).textbox( 'getText');
			str = '[' + str + ']';
			try{
				var inputobj = JSON.parse( str );
				win_output.window('close' );
				
				var lostCards = [];
				ary_deck = _.map( inputobj, function( incard ){
					var retobj = _.find( cardlist, function( oricard ){
						return oricard.id.indexOf( incard.replace( '.jpg', '' ) ) == 0;
					});
					if( retobj == undefined ){
						lostCards.push( incard );
					}
					return retobj;
				});
				
				ary_deck = _.filter( ary_deck, function( cardItem ){
					return cardItem != undefined;
				});
				
				if( ary_deck.length == 0 ){
					showMessage( '系統中沒有任何您所輸入的卡片哦' );
				}else{
					if( lostCards.length > 0 ){
						showMessage( '系統中找不到這些卡片哦! 代碼: ' + JSON.stringify( lostCards ) );
					}
					
					_.each( ary_deck, function( card ){
						card.itemId = getId();
						card.url = gameController.getCardUrl( game, card );
						if( card.url == undefined ) {
							card.url = 'images/cardback.png';
						}
					});
					setDeck();
				}
			}catch( e ){
				$.messager.alert('提示','格式錯誤哦');
			}
		}
		
		function showMessage( msg ){
			$.messager.show({
				title:'提示',
				msg: msg,
				timeout:5000,
				showType:'slide'
			});
		}
		
		function onResetClick(){
			googleTracking.click( 'onResetClick' );
			$('form').find( 'select' ).val('');
			$('form').find( 'input[type=checkbox]' ).prop('checked', false);
			$('form').find( 'input[type=text]' ).val('');
		}
		
		function onSetDeckClick(){
			googleTracking.click( 'onSetDeckClick' );
			window.open('https://particle-979.appspot.com/manager/index.html#');
		}
		
		function onGotoGameClick(){
			googleTracking.click( 'onGotoGameClick' );
			window.open('https://particle-979.appspot.com/card/index.html#');
		}
		
		function onGoToClubClick(){
			googleTracking.click( 'onGoToClubClick' );
			window.open('//www.facebook.com/groups/1521526761495948/');
		}
		
		module.onResetClick = onResetClick;
		module.onSearchClick = onSearchClick;
		module.onTipClick = onTipClick;
		module.onClearClick = onClearClick;
		module.onSaveClick = onSaveClick;
		module.onLoadClick = onLoadClick;
		module.onSetDeckClick = onSetDeckClick;
		module.onGotoGameClick = onGotoGameClick;
		module.onGoToClubClick = onGoToClubClick;
		
		module.searchCards = searchCards;
		
	})( app.view );
	</script>
</body>
</html>