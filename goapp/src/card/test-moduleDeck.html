<script type="text/javascript" src="../common/js/lib/jquery-easyui-1.4.3/jquery.min.js"></script>
<script src="../common/js/lib/csv.js"></script>
<script src="../common/js/lib/async/async.js"></script>
<script src="../common/js/lib/underscore/underscore-min.js"></script>	
<script src="../common/js/lib/purl.js"></script>	
<script src="../common/js/magic.js"></script>	
<script src=''></script>
<body>
	<table border="1">
		<tr>
			<td>勢力/國家</td>
			<td>
				勢力
				<select name="ntype">
					<option></option>
					<option>資本</option>
					<option>共產</option>
					<option>人民</option>
				</select>
				國家
				<select name="nation">
					<option></option>
					<option>中國</option>
					<option>美國</option>
					<option>英國</option>
					<option>德國</option>
					<option>日本</option>
					<option>韓國</option>
					<option>俄羅斯</option>
					<option>以色列</option>
				</select>
			</td>
		</tr>
		<tr>
			<td>卡片類型</td>
			<td>
				卡片
				<select name="ctype">
					<option></option>
					<option>部隊</option>
					<option>建築</option>
					<option>戰術</option>
				</select>
				兵器
				<select name="atype">
					<option></option>
					<option>戰鬥機</option>
					<option>攻擊機</option>
					<option>戰鬥攻擊機</option>
					<option>戰略轟炸機</option>
					<option>支援機</option>
					<option>直升機</option>
					<option>坦克</option>
					<option>裝甲車</option>
					<option>士兵</option>
					<option>對空炮</option>
					<option>自走炮</option>
					<option>戰略火炮</option>
				</select>
			</td>
		</tr>
		<tr>
			<td>科技力</td>
			<td>
				<select name="tech_1">
					<option></option>
					<option>1</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
				</select>
				以上
				<select name="tech_2">
					<option></option>
					<option>0</option>
					<option>1</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
				</select>
				以下
			</td>
		</tr>
		<tr>
			<td>資源cost</td>
			<td>
				<select name="cost_1">
					<option></option>
					<option>1</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5</option>
					<option>6</option>
				</select>
				以上
				<select name="cost_2">
					<option></option>
					<option>0</option>
					<option>1</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5</option>
					<option>6</option>
				</select>
				以下
			</td>
		</tr>
		<tr>
			<td>生產速度</td>
			<td>
				<select name="build_1">
					<option></option>
					<option>1</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
				</select>
				以上
				<select name="build_2">
					<option></option>
					<option>0</option>
					<option>1</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
				</select>
				以下
			</td>
		</tr>
		<tr>
			<td>攻擊力</td>
			<td>
				陸
				<select name="pland">
					<option></option>
					<option>不可</option>
					<option>扺抗</option>
					<option>精通</option>
				</select>
				空
				<select name="psky">
					<option></option>
					<option>不可</option>
					<option>扺抗</option>
					<option>精通</option>
				</select>
				兵
				<select name="psoilder">
					<option></option>
					<option>不可</option>
					<option>扺抗</option>
					<option>精通</option>
				</select>
				城
				<select name="pcity">
					<option></option>
					<option>不可</option>
					<option>扺抗</option>
					<option>精通</option>
				</select>
			</td>
		</tr>
		<tr>
			<td>速度</td>
			<td>
				<select name="speed">
					<option></option>
					<option>0</option>
					<option>1</option>
					<option>2</option>
					<option>3</option>
				</select>
			</td>
		</tr>
		<tr>
			<td>能力</td>
			<td>
				<input type="checkbox" name="遠距" />遠距
				<input type="checkbox" name="軍力減損" />軍力減損
				<input type="checkbox" name="進駐" />進駐
				<input type="checkbox" name="掃蕩" />掃蕩
				<input type="checkbox" name="防塔" />防塔
				<input type="checkbox" name="煙霧彈" />煙霧彈
				<input type="checkbox" name="偵察" />偵察
				<input type="checkbox" name="警戒" />警戒
				<input type="checkbox" name="全偵" />全偵
				<input type="checkbox" name="遠距" />遠距
				<input type="checkbox" name="區域攻擊" />區域攻擊
				<input type="checkbox" name="維修" />維修
				<input type="checkbox" name="複合式裝甲" />複合式裝甲
				<input type="checkbox" name="突襲" />突襲
				<input type="checkbox" name="回收" />回收
				<input type="checkbox" name="暱蹤" />暱蹤
				<input type="checkbox" name="超高速" />超高速
				
				<input type="checkbox" name="核子引擎" />核子引擎
				<input type="checkbox" name="雷射護盾" />雷射護盾
				<input type="checkbox" name="火焰兵器" />火焰兵器
				<input type="checkbox" name="生化兵器" />生化兵器
				<input type="checkbox" name="ECM兵器" />ECM兵器
				
				<input type="checkbox" name="重點建物" />重點建物
			</td>
		</tr>
		<tr>
		  <td >
			卡片名稱檢索<br>
		  </td>
		  <td colspan="3">
			<input type="text" name="card_name" size=32>
			<br>
		  </td>
		</tr>
		<tr>
		  <td >
			卡片規則檢索<br>
		  </td>
		  <td colspan="3">
			<input type="text" name="rule" size=32>
			<br>
		  </td>
		</tr>
		 <tr>
		  <td >
			id檢索<br>
		  </td>
		  <td colspan="3">
			  <input id="txt_id" type="text" name="id" size=16>
		  </td>
		</tr>
	</table>
</body>
<script>
var ary = [
	[{type:'label', val:'勢力'},{type:'select', span:3, val:{name:'ntype', items:['資本','共產','人民']}},{type:'label',val:'國家'},{type:'select',span:3,val:{name:'nation', items:['中國','美國','英國','德國','日本','韓國','俄羅斯','以色列']}}],
	[{type:'label', val:'卡片'},{type:'select', span:3,val:{name:'ctype', items:['部隊','建築','戰術']}},{type:'label',val:'兵器'},{type:'select', span:3, val:{name:'atype', items:['戰鬥機','攻擊機','戰鬥攻擊機','戰略轟炸機','支援機','直升機','坦克','裝甲車','士兵','對空炮','自走炮','戰略火炮']}}],
	[{type:'label', val:'科技力以上'},{type:'select', span:3,val:{name:'tech_1', items:['1','2','3','4']}},{type:'label',val:'科技力以下'},{type:'select', span:3, val:{name:'tech_2', items:['1','2','3','4']}}],
	[{type:'label', val:'cost以上'},{type:'select', span:3,val:{name:'cost_1', items:['1','2','3','4','5','6']}},{type:'label',val:'cost以下'},{type:'select', span:3, val:{name:'cost_2', items:['1','2','3','4','5','6']}}],
	[{type:'label', val:'生產速度以上'},{type:'select', span:3,val:{name:'build_1', items:['1','2','3']}},{type:'label',val:'生產速度以下'},{type:'select', span:3, val:{name:'build_2', items:['1','2','3']}}],
	[{type:'label', val:'陸'},{type:'select',val:{name:'pland', items:['不可','扺抗','精通']}},{type:'label',val:'空'},{type:'select', val:{name:'psky', items:['不可','扺抗','精通']}},{type:'label', val:'兵'},{type:'select',val:{name:'psoilder', items:['不可','扺抗','精通']}},{type:'label',val:'城'},{type:'select', val:{name:'pcity', items:['不可','扺抗','精通']}}],
	[{type:'label', val:'速度'},{type:'select',span:7,val:{name:'speed', items:['0','1','2','3']}}],
	[{type:'label', val:'能力'},{type:'checkbox', span:7,val:{name:'', items:['遠距','軍力減損','進駐','掃蕩','防塔','煙霧彈','偵察','警戒','全偵','遠距','區域攻擊','維修','複合式裝甲','突襲','回收','暱蹤','超高速','核子引擎','雷射護盾','火焰兵器','生化兵器','ECM兵器','重點建物']}}],
	[{type:'label', val:'卡片名稱檢索'},{type:'textbox', span:7,val:{name:'card_name'}}],
	[{type:'label', val:'卡片規則檢索'},{type:'textbox', span:7,val:{name:'rule'}}],
	[{type:'label', val:'id檢索'},{type:'textbox', span:7,val:{name:'id'}}]
];

function parseToTable( data ){
	var table = $('<table border="1"></table>' );
	_.each( data, function( items ){
		var trdiv = $('<tr></tr>');
		_.each( items, function( item ){
			var tddiv = $('<td></td>' );
			tddiv.css('text-align', 'center' );
			var type = item.type;
			var val = item.val;
			var span = item.span;
			if( span != undefined ){
				tddiv.attr( 'colspan', span );
			}
			
			switch( type ){
				case 'label': 
					tddiv.html( val ); 
					tddiv.css( 'width', '150px' );
					break;
				case 'select':
					var selname = val.name;
					var items = val.items;
					var seldiv = $('<select name="' + selname + '"></select>');
					seldiv.css('width', '100%' );
					seldiv.append( '<option></option>');
					_.each( items, function( s ){
						seldiv.append( '<option>' + s + '</option>');
					});
					tddiv.append( seldiv );
					break;
				case 'checkbox':
					var items = val.items;
					_.each( items, function( s ){
						var chkdiv = '<input type="checkbox" name="' + s + '" />' + s;
						tddiv.append( chkdiv );
					});
					break;
				case 'textbox':
					var textname = val.name;
					var textdiv = $('<input type="text" name="' + textname + '"/>');
					textdiv.css('width', '100%' );
					tddiv.append( textdiv );
			}
			
			trdiv.append( tddiv );
		});
		table.append( trdiv );
	});
	return table;
}

$('body').append( parseToTable( ary ) );

console.log( ary );
</script>