<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<title>上善若水</title>
	<meta name="description" content="" />
	
	<link rel="stylesheet" type="text/css" href="../common/js/lib/jquery-easyui-1.4.3/themes/black/easyui.css">
	<link rel="stylesheet" type="text/css" href="../common/js/lib/jquery-easyui-1.4.3/themes/icon.css">
	<link rel="stylesheet" type="text/css" href="../common/css/normalize.css">
		
	<script type="text/javascript" src="../common/js/lib/rectSelect/rectSelect.js"></script>
	<link rel="stylesheet" type="text/css" href="../common/js/lib/rectSelect/rectSelect.css">
		
	<script type="text/javascript" src="../common/js/lib/leo.utils.js"></script>
	<script type="text/javascript" src="../common/js/lib/jquery-easyui-1.4.3/jquery.min.js"></script>
	<script type="text/javascript" src="../common/js/lib/jquery-easyui-1.4.3/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="../common/js/lib/jquery/jquery.tmpl.min.js"></script>
	<script type="text/javascript" src="../common/js/lib/myapp.facebook.js"></script>
		
</head>
<style>

#btn_team,
#btn_stock,
#btn_particle,
#btn_card
{
	position:relative;
	width:97%;
	height:40px;
}

.img_intro{
	width:400px;
}

.group{
	position:relative;
	width:100%;
}

.hori{
	position:relative;
	display:inline-block;
}

a{
	color:white;
	font-size:20px;
}
</style>
<script id="tmpl_deck" type="jquery-x-tmpl">
	<div class="group">
		<a id="" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="iconCls:'icon-remove'" ></a>
		<div class="hori"><a id="" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="toggle:true,group:'g2',selected:true" >格</a></div>
		<div class="hori"><a id="" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="toggle:true,group:'g2',selected:false" >鋼</a></div>
		<div class="hori"><a id="" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="toggle:true,group:'g2',selected:false" >三</a></div>
		<div class="hori"><input class="easyui-textbox" style="width:100px"></div>
		<div class="hori"><input class="easyui-textbox" style="width:500px"></div>
	</div>
</script>
<body>
	<div class="easyui-layout" style="width:100%;height:100%;">
		<div data-options="region:'north',split:false" style="height:36px;">
			<div style="position:absolute; right:0; top:0;">
				<a href="#" id="btn_login" class="easyui-linkbutton" data-options="iconCls:'icon-fb-login',disabled:true" onclick="onBtnClick(this)" style="margin-top:5px; margin-right:5px; ">登入</a>
			</div>
		</div>
		<div data-options="region:'west',title:'選單',split:true" style="width:200px; min-width:200px;">
			<div class="group">
				<div class="group">
					<div class="hori" style="width:20%">
						<a id="btn_stockLink" href="#" class="easyui-linkbutton" style="width:100%; height:40px;" onclick="onBtnClick(this)" data-options="iconCls:'icon-back'" ></a>
					</div>
					<div class="hori" style="width:78%">
						<a id="btn_stock" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="toggle:true,group:'g1',selected:false" >余氏k線圖</a>
					</div>
				</div>
				<div class="group">
					<div class="hori" style="width:20%">
						<a id="btn_particleLink"  href="#"  class="easyui-linkbutton" style="width:100%; height:40px;" onclick="onBtnClick(this)" data-options="iconCls:'icon-back'" ></a>
					</div>
					<div class="hori" style="width:78%">
						<a id="btn_particle" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="toggle:true,group:'g1',selected:false" >幽夢幻境</a>
					</div>
				</div>
				<div class="group">
					<div class="hori" style="width:20%">
						<a id="btn_cardLink" href="#" class="easyui-linkbutton" style="width:100%; height:40px;" onclick="onBtnClick(this)" data-options="iconCls:'icon-back'" ></a>
					</div>
					<div class="hori" style="width:78%">
						<a id="btn_card" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="toggle:true,group:'g1',selected:true" >卡牌風雲</a>
					</div>
				</div>
				<a id="btn_team" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="toggle:true,group:'g1'">開發人員</a>
			</div>
		</div>
		<div data-options="region:'center',title:'內容'" style="">
			<div id="mc_stock" style="position:relative; width:100%; height:100%; "></div>
			<div id="mc_particle" style="position:relative; width:100%; height:100%; "></div>
			<div id="mc_card" style="position:relative; width:100%; height:100%; ">
				<div class="group" style="text-align:center; margin-top:10px;">
					<a id="btn_addDeck" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="iconCls:'icon-add'" >新增套牌</a>
				</div>
				<div id="mc_deckContainer" class="group" style="text-align:center; margin-top:10px;">
					
				</div>
			</div>
			<div id="mc_team" style="position:relative; width:100%; height:100%; display:none;">
				team
			</div>
		</div>
	</div>
	<script src="../common/js/lib/underscore/underscore-min.js"></script>	
	<script src="../common/js/store.js"></script>	
	<script src="js/model.js"></script>	
	<script>
	/*
	online:'425311264344425',
	local:'679171275511375',
	*/
	
	var id = 0;
	
	function getNewName(){
		
	}
	
	myapp.facebook.init( '679171275511375', function(){
		$('#btn_login' ).linkbutton( 'enable' );
	});
	
	openCard();
	
	function appStart(){
	
	}
	
	function handleModel( func ){
		return function( err, ret ){
			if( err != null ){
				alert( err );
			}else{
				func( ret );
			}
		}
	}
	
	function onBtnClick( target ){
		switch( target.id ){
			case 'btn_login':
				loginFacebook( function( ret ){
					$('#btn_login' ).linkbutton( 'disable' );
					
					var userId = ret.authResponse.userID;
					var accessToken = ret.authResponse.accessToken;
					showMessage( '登入成功' );
					
					model.load( userId, accessToken, handleModel( function( ret ){
						console.log( ret );
					}));
				});
				break;
			case 'btn_addDeck':
				addDeck();
				break;
			case 'btn_stockLink':
				window.open( 'http://particle-979.appspot.com/stock/index.html#' );
				break;
			case 'btn_particleLink':
				window.open( 'http://particle-979.appspot.com/particle/index.html#' );
				break;
			case 'btn_cardLink':
				window.open( 'http://particle-979.appspot.com/card/index.html#' );
				break;
			case 'btn_stock':
				openStock();
				break;
			case 'btn_particle':
				openParticle();
				break;
			case 'btn_card':
				openCard();
				break;
			case 'btn_team':
				openTeam();
				break;
		}
	}
	
	function addDeck(){
		var dom = $("#tmpl_deck" ).tmpl();
		$('#mc_deckContainer').append( dom );
		dom.find( '.easyui-linkbutton' ).linkbutton();
		dom.find( '.easyui-textbox' ).textbox();
	}
	
	function loginFacebook( cb ){
		myapp.facebook.login( cb );
	}
	
	function openStock(){
		$('#mc_stock' ).show();
		$('#mc_particle' ).hide();
		$('#mc_card' ).hide();
		$('#mc_team' ).hide();
	}
	
	function openParticle(){
		$('#mc_stock' ).hide();
		$('#mc_particle' ).show();
		$('#mc_card' ).hide();
		$('#mc_team' ).hide();
	}
	
	function openCard(){
		$('#mc_stock' ).hide();
		$('#mc_particle' ).hide();
		$('#mc_card' ).show();
		$('#mc_team' ).hide();
	}
	
	function openTeam(){
		$('#mc_stock' ).hide();
		$('#mc_particle' ).hide();
		$('#mc_card' ).hide();
		$('#mc_team' ).show();
	}
	
	function showMessage( msg ){
		$.messager.show({
			title:'提示',
			msg: msg,
			timeout:2000,
			showType:'slide'
		});
	}
	</script>
	<script src="js/manager.js"></script>
</body>
</html>