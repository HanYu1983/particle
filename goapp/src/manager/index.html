<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<title>上善若水</title>
	<meta name="description" content="" />
	
	<link rel="stylesheet" type="text/css" href="../common/js/lib/jquery-easyui-1.4.3/themes/black/easyui.css">
	<link rel="stylesheet" type="text/css" href="../common/js/lib/jquery-easyui-1.4.3/themes/icon.css">
	<link rel="stylesheet" type="text/css" href="../common/css/normalize.css">
		
	<script type="text/javascript" src="../common/js/lib/rectSelect/rectSelect.js"></script>
	<link rel="stylesheet" type="text/css" href="../common/js/lib/rectSelect/rectSelect.css">
		
	<script type="text/javascript" src="../common/js/lib/leo.utils.js"></script>
	<script type="text/javascript" src="../common/js/lib/jquery-easyui-1.4.3/jquery.min.js"></script>
	<script type="text/javascript" src="../common/js/lib/jquery-easyui-1.4.3/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="../common/js/lib/jquery/jquery.tmpl.min.js"></script>
	<script type="text/javascript" src="../common/js/lib/myapp.facebook.js"></script>
	<script type="text/javascript" src="../common/js/lib/google/ga.js"></script>
	<script type="text/javascript" src="../common/js/lib/han/particle.js"></script>
	<script type="text/javascript" src="../common/js/lib/han/particleDrawer.js"></script>
		
</head>
<style>
/*
html, body, div{
	cursor:none;
}*/

#btn_about,
#btn_team,
#btn_login,
#btn_stock,
#btn_particle,
#btn_particleClojure,
#btn_card
{
	position:relative;
	width:97%;
	//height:40px;
}

#btn_particleClojureLink,
#btn_stockLink,
#btn_particleLink,
#btn_cardLink{
	width:100%; 
	//height:40px;
}

.img_intro{
	width:400px;
}

.group{
	position:relative;
	width:100%;
}

.hori{
	position:relative;
	display:inline-block;
}

a{
	color:yellow;
	font-size:16px;
	text-decoration: none;
}

.refvideo{
	width:32%;
	margin-left:4px;
}
</style>
<script id="tmpl_deck" type="jquery-x-tmpl">
	<div id=${name} class="group">
		<a id="btn_remove" href="#" class="easyui-linkbutton" data-options="iconCls:'icon-remove'" ></a>
		<div class="hori"><a id="btn_fighter" href="#" class="easyui-linkbutton" data-options="toggle:true,selected:true" >格</a></div>
		<div class="hori"><a id="btn_gundamWar" href="#" class="easyui-linkbutton" data-options="toggle:true,selected:false" >鋼</a></div>
		<div class="hori"><a id="btn_sangoWar" href="#" class="easyui-linkbutton" data-options="toggle:true,selected:false" >三</a></div>
		<div class="hori"><input id="txt_name" class="easyui-textbox" style="width:100px" value=${name}></div>
		<div class="hori"><input id="txt_cards" class="easyui-textbox" style="width:500px"></div>
	</div>
</script>
<body>
	<div class="easyui-layout" style="width:100%;height:100%;">
		<!--
		<div data-options="region:'north',split:false" style="height:35px;">
			<div style="position:absolute; right:5px; top:5px;">
				<div class="hori">
					<a href="#" id="btn_login" class="easyui-linkbutton" data-options="iconCls:'icon-fb-login',disabled:true" onclick="onBtnClick(this)" >登入</a>
				</div>
				<div class="hori">
					<a id="btn_about" href="#" class="easyui-linkbutton" onclick="$('#dia_about').panel( 'open' )" data-options="iconCls:'icon-help'"></a>
				</div>
			</div>
			
		</div>
		-->
		<div data-options="region:'west',title:'選單',split:false,collapsible:false" style="width:200px; min-width:200px;">
			<div class="group">
				<div class="group">
					<div class="hori" style="width:15%">
						<a id="btn_stockLink" href="#" class="easyui-linkbutton"  onclick="onBtnClick(this)" data-options="iconCls:'icon-back'" ></a>
					</div>
					<div class="hori" style="width:83%">
						<a id="btn_stock" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="toggle:true,group:'g1',selected:false" >余氏k線圖</a>
					</div>
				</div>
				<div class="group">
					<div class="hori" style="width:15%">
						<a id="btn_particleLink"  href="#"  class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="iconCls:'icon-back'" ></a>
					</div>
					<div class="hori" style="width:83%">
						<a id="btn_particle" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="toggle:true,group:'g1',selected:false" >幽夢仙境</a>
					</div>
				</div>
				<div class="group">
					<div class="hori" style="width:15%">
						<a id="btn_cardLink" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="iconCls:'icon-back'" ></a>
					</div>
					<div class="hori" style="width:83%">
						<a id="btn_card" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="toggle:true,group:'g1',selected:true" >卡牌風雲</a>
					</div>
					
				</div>
				<a id="btn_team" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="toggle:true,group:'g1'">開發人員</a>
				<div class="group">
					<div class="hori" style="width:15%">
						<a id="btn_particleClojureLink"  href="#"  class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="iconCls:'icon-back'" ></a>
					</div>
					<div class="hori" style="width:83%">
						<a id="btn_particleClojure" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="toggle:true,group:'g1',selected:false" >幽夢幻境函數式語言版</a>
					</div>
				</div>
				<div class="group" style="margin-top:30px;">
					<a href="#" id="btn_login" class="easyui-linkbutton" data-options="iconCls:'icon-fb-login',disabled:true" onclick="onBtnClick(this)" >登入</a>
					<a id="btn_about" href="#" class="easyui-linkbutton" onclick="$('#dia_about').panel( 'open' )" data-options="iconCls:'icon-help'"></a>
				</div>
				
			</div>
		</div>
		<div data-options="region:'center',title:'內容'" style="">
			<div id="mc_stock" style="position:relative; width:100%; height:100%; ">
				<div class="group" style="text-align:center; margin-top:10px;">
					非常輕量級的網頁股票技術k線的觀察解決方案，可以追縱、筆記、學習指標用法等等，也可以一天一天的練習股票買賣點
					<br>
					<span style="color:yellow;">注意：無法抓到今日股價、K線圖左邊為最近日期、有些錯誤處理沒有處理，會有程序崩潰的情況。因為目前還在開發中，記錄有可能會刪除</span>
					<br/>
					不用安裝、有網路即可觀看
					<br>
					<br>
					開發環境：google app engine<br>
					開發語言：golang/ haxe/ clojurescript/ javascript/ jquery easy ui<br>
				</div>
				<div class="group" style="text-align:center; margin-top:10px;">
					<div class="hori refvideo">
						<img style="position:relative; width:100%;" src="images/forExtend_560_315.png"/>
						<div style="position:absolute; left:0; top:0; width:100%; height:100%;">
							<iframe width="100%" height="100%" src="https://www.youtube.com/embed/HLbJIh-3siU?list=PLcReQCVhkEm2HQEbO5YkSEd_LGjMrj0vA" frameborder="0" allowfullscreen></iframe>
						</div>
					</div>
				</div>
				<div class="group" style="text-align:center; margin-top:10px;">
					<a href="//www.youtube.com/watch?v=TX4Rn182urU&index=1&list=PLcReQCVhkEm2HQEbO5YkSEd_LGjMrj0vA">更多影片</a>
				</div>
			</div>
			<div id="mc_particle" style="position:relative; width:100%; height:100%; ">
				<div class="group" style="text-align:center; margin-top:10px;">
					傻瓜也能用的粒子系統！好用！
					<br>
					<br>
					<span style="color:yellow;">效能已優化、功能強大</span>
					<br>
					<span style="color:yellow;">本網站粒子特效均由幽夢仙境製作而來! 有拖拉效果、點擊效果、全螢幕效果</span>
					<br>
					<br>
					開發環境：google app engine<br>
					開發語言：golang/ haxe/ javascript/ jquery easy ui<br>
				</div>
				<div class="group" style="text-align:center; margin-top:10px;">
					<div class="hori refvideo">
						<img style="position:relative; width:100%;" src="images/forExtend_560_315.png"/>
						<div style="position:absolute; left:0; top:0; width:100%; height:100%;">
							<iframe width="100%" height="100%" src="https://www.youtube.com/embed/Oq7zQ7tPPgA?list=PLcReQCVhkEm2HQEbO5YkSEd_LGjMrj0vA" frameborder="0" allowfullscreen></iframe>
						</div>
					</div>
					<div class="hori refvideo">
						<img style="position:relative; width:100%;" src="images/forExtend_560_315.png"/>
						<div style="position:absolute; left:0; top:0; width:100%; height:100%;">
							<iframe width="100%" height="100%" src="https://www.youtube.com/embed/ntpmSkqPAD8?list=PLcReQCVhkEm2HQEbO5YkSEd_LGjMrj0vA" frameborder="0" allowfullscreen></iframe>
						</div>
					</div>
					<div class="hori refvideo">
						<img style="position:relative; width:100%;" src="images/forExtend_560_315.png"/>
						<div style="position:absolute; left:0; top:0; width:100%; height:100%;">
							<iframe width="100%" height="100%" src="https://www.youtube.com/embed/wKAQg_WlAcY?list=PLcReQCVhkEm2HQEbO5YkSEd_LGjMrj0vA" frameborder="0" allowfullscreen></iframe>
						</div>
					</div>
				</div>
				<div class="group" style="text-align:center; margin-top:10px;">
					<a href="//www.youtube.com/watch?v=TX4Rn182urU&index=1&list=PLcReQCVhkEm2HQEbO5YkSEd_LGjMrj0vA">更多影片</a>
				</div>
			</div>
			<div id="mc_particle_clojure" style="position:relative; width:100%; height:100%; ">
				<div class="group" style="text-align:center; margin-top:10px;">
					函數式語言開發粒子系統的範例，可惜的是效能非常差
					<br>
					<br>
					開發環境：google app engine<br>
					開發語言：golang/ haxe/ clojurescript/ javascript/ jqxWidget<br>
				</div>
			</div>
			<div id="mc_card" style="position:relative; width:100%; height:100%; ">
				<div class="group" style="text-align:center; margin-top:10px;">
					卡牌風雲是一款基於網際網路的卡牌遊玩平台，它不限於玩哪一種類型的牌類遊戲，可以說，只要能有圖片的話，牌類遊戲都可以玩。
					<br/>
					目前收錄有：<span style="color:yellow">格鬥風雲錄、鋼彈大戰、三國志大戰</span>
					<br/>
					<br/>
					以下為組牌區，組完牌即可點擊左邊的卡牌風雲箭頭前往卡牌風雲遊戲頁面遊玩。<span style="color:yellow">這個功能要登入facebook才可以使用</span>
					<br>
					<br>
					開發環境：google app engine<br>
					開發語言：golang/ haxe/ javascript/ jquery easy ui<br>
				</div>
				<div class="group" style="text-align:center; margin-top:10px;">
					<div class="hori">
						<a id="btn_addDeck" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="iconCls:'icon-add',disabled:true" >新增套牌</a>
					</div>
					<div class="hori">
						<a id="btn_saveDeck" href="#" class="easyui-linkbutton" onclick="onBtnClick(this)" data-options="iconCls:'icon-save',disabled:true" >存檔</a>
					</div>
				</div>
				<div id="mc_deckContainer" class="group" style="text-align:center; margin-top:10px;">
					<!-- by script -->
				</div>
				<div class="group" style="text-align:center; margin-top:10px;">
					<div class="hori refvideo">
						<img style="position:relative; width:100%;" src="images/forExtend_560_315.png"/>
						<div style="position:absolute; left:0; top:0; width:100%; height:100%;">
							<iframe width="100%" height="100%" src="https://www.youtube.com/embed/TX4Rn182urU?list=PLcReQCVhkEm2HQEbO5YkSEd_LGjMrj0vA" frameborder="0" allowfullscreen></iframe>
						</div>
					</div>
					<div class="hori refvideo">
						<img style="position:relative; width:100%;" src="images/forExtend_560_315.png"/>
						<div style="position:absolute; left:0; top:0; width:100%; height:100%;">
							<iframe width="100%" height="100%" src="https://www.youtube.com/embed/HqB0Itaplhc?list=PLcReQCVhkEm2HQEbO5YkSEd_LGjMrj0vA" frameborder="0" allowfullscreen></iframe>
						</div>
					</div>
					<div class="hori refvideo">
						<img style="position:relative; width:100%;" src="images/forExtend_560_315.png"/>
						<div style="position:absolute; left:0; top:0; width:100%; height:100%;">
							<iframe width="100%" height="100%" src="https://www.youtube.com/embed/dkvBx6B7LAM?list=PLcReQCVhkEm2HQEbO5YkSEd_LGjMrj0vA" frameborder="0" allowfullscreen></iframe>
						</div>
					</div>
				</div>
				<div class="group" style="text-align:center; margin-top:10px;">
					<a href="//www.youtube.com/watch?v=TX4Rn182urU&index=1&list=PLcReQCVhkEm2HQEbO5YkSEd_LGjMrj0vA">更多影片</a>
				</div>
			</div>
			<div id="mc_team" style="position:relative; width:100%; height:100%; display:none;">
				<div class="group" style="text-align:center; margin-top:10px;">
					<span style="font-size:20px;">余漢君 HanYu</span>
					<br/>
					<br/>
					後端工程師
					<br/>
					主要負責上善若水app的技術研發、後台資料庫、server端管理、model端編寫
					<br>
					專長：golang/ clojurescript/ javascript
					<br/>
					<a href="//www.facebook.com/han.yu.100?fref=ufi">//www.facebook.com/han.yu.100?fref=ufi</a>
				</div>
				<div class="group" style="text-align:center; margin-top:40px;">
					<span style="font-size:20px;">余漢平 VicYu</span>
					<br/>
					<br/>
					前端工程師
					<br/>
					主要負責上善若水app的html、ui介面、前台編寫
					<br>
					專長：haxe/ as3/ javascript/ html/ css
					<br/>
					<a href="//www.facebook.com/vic.yu.14">//www.facebook.com/vic.yu.14</a>
				</div>
				<!--
				<div class="group" style="text-align:center; margin-top:100px; margin-bottom:50px; ">
					<div style="font-size:20px;">
						特別感謝：林竹君
					</div>
				</div>
				-->
				<!--
				<div class="group" style="text-align:center; margin-top:40px;">
					<span style="font-size:20px;">林竹君 Xiao Za</span>
					<br/>
					<br/>
					美術設計師
					<br/>
					主要負責上善若水app需要美術圖形的部分
					<br>
					硬底子的美術實力
					<br/>
					<a href="//www.facebook.com/xiao.sa.5076">//www.facebook.com/xiao.sa.5076</a>
				</div>
				-->
			</div>
		</div>
		<div id="dia_about" class="easyui-dialog" title="上善若水" data-options="iconCls:'icon-help',closed:true" style="padding:10px">
			<div class="group" style="position:relative; width:100%; text-align:center;">
				<div class="hori" >
					上善若水
					<br/>
					<img src="../common/images/logo.jpg" width="100" height="100">
					<br/>
					上善若水粉絲頁
					<br/>
					<a style="color:yellow; font-size:12px;" href="//www.facebook.com/pages/上善若水/1653920964852269" target="_blank">//www.facebook.com/pages/上善若水/1653920964852269</a>
				</div>
			</div>
		</div>
	</div>
	<div id="div" style="position:absolute; left:0; top:0; width:100%; height:100%; pointer-events:none; overflow:hidden;">
		
	</div>
	<div style="display:none;">
		<img id='glow_128_128' src='../common/images/effect/glow_128_128.jpg'>
		<img id='glow_png_128_128' src='../common/images/effect/glow_png_128_128.png'>
		<img id='glow_color_png_128_128' src='../common/images/effect/glow_color_png_128_128.png'>
		<img id='fire_128_128' src='../common/images/effect/fire_128_128.jpg'>
		<img id='fire_png_128_128' src='../common/images/effect/fire_png_128_128.png'>
		<img id='fire_color_png_128_128' src='../common/images/effect/fire_color_png_128_128.png'>
		<img id='smoke_128_128' src='../common/images/effect/smoke_128_128.png'>
		<img id='lead_32_32' src='../common/images/effect/lead_32_32.png'>
		<img id='cornerGlow_256_256' src='../common/images/effect/cornerGlow_256_256.png'>
	</div>
	<script src="../common/js/lib/underscore/underscore-min.js"></script>	
	<script src="../common/js/store.js"></script>	
	<script src="../common/js/cardSuit.js"></script>	
	<script>
	
	/* utils function */
	
	function handleModel( func ){
		return function( err, ret ){
			if( err != null ){
				alert( err );
				window.location.reload();
			}else{
				func( ret );
			}
		}
	}
	
	function loginFacebook( cb ){
		myapp.facebook.login( cb );
	}
	
	function openStock(){
		$('#mc_stock' ).show();
		$('#mc_particle' ).hide();
		$('#mc_particle_clojure' ).hide();
		$('#mc_card' ).hide();
		$('#mc_team' ).hide();
	}
	
	function openParticleClojure(){
		$('#mc_stock' ).hide();
		$('#mc_particle' ).hide();
		$('#mc_particle_clojure' ).show();
		$('#mc_card' ).hide();
		$('#mc_team' ).hide();
	}
	
	function openParticle(){
		$('#mc_stock' ).hide();
		$('#mc_particle' ).show();
		$('#mc_particle_clojure' ).hide();
		$('#mc_card' ).hide();
		$('#mc_team' ).hide();
	}
	
	function openCard(){
		$('#mc_stock' ).hide();
		$('#mc_particle' ).hide();
		$('#mc_particle_clojure' ).hide();
		$('#mc_card' ).show();
		$('#mc_team' ).hide();
	}
	
	function openTeam(){
		$('#mc_stock' ).hide();
		$('#mc_particle' ).hide();
		$('#mc_particle_clojure' ).hide();
		$('#mc_card' ).hide();
		$('#mc_team' ).show();
	}
	
	function showMessage( msg ){
		$.messager.show({
			title:'提示',
			msg: msg,
			timeout:2000,
			showType:'slide'
		});
	}
	
	function showAlert( msg ){
		$.messager.alert('錯誤', msg );
	}
	
	function showLoading( msg ){
		$.messager.progress({
			title:'提示',
			msg: msg 
		});
	}
	
	function closeLoading(){
		$.messager.progress( 'close' ); 
	}
	
	</script>
	<script src="js/app.card.js"></script>	
	<script>
	googleTracking.init( 'UA-55273266-3' );
	
	/*
	online:'425311264344425',
	local:'679171275511375',
	*/
	
	var fbid, token;
	var loadModel;
	
	showLoading( '準備中...' );
	myapp.facebook.init( '425311264344425', function(){
		$('#btn_login' ).linkbutton( 'enable' );
		closeLoading();
	});
	
	openCard();
	
	function onBtnClick( target ){
		switch( target.id ){
			case 'btn_login':
				showLoading( '登入並讀取資料中...' );
				loginFacebook( function( ret ){
					$('#btn_login' ).linkbutton( 'disable' );
					showMessage( '登入成功' );
					
					fbid = ret.authResponse.userID;
					token = ret.authResponse.accessToken;
					
					cardSuit.load( fbid, token, handleModel( function( ret ){
						loadModel = ret;
						app.card.showDeckList( loadModel );
						
						$('#btn_addDeck').linkbutton( 'enable' );
						closeLoading();
					}));
				});
				break;
			case 'btn_addDeck':
				cardSuit.editCardSuit( loadModel, {
					name: 'default',
					game: "fighter",
					cards:[]
				})
				app.card.showDeckList( loadModel );
				break;
			case 'btn_stockLink':
				window.open( '//particle-979.appspot.com/stock/index.html#' );
				break;
			case 'btn_particleLink':
				window.open( '//particle-979.appspot.com/particle/index.html#' );
				break;
			case 'btn_cardLink':
				window.open( '//particle-979.appspot.com/card/index.html#' );
				break;
			case 'btn_particleClojureLink':
				window.open( '//particle-979.appspot.com/particle/index_clojure.html#' );
				break;
			case 'btn_stock':
				openStock();
				break;
			case 'btn_particle':
				openParticle();
				break;
			case 'btn_particleClojure':
				openParticleClojure();
				break;
			case 'btn_card':
				openCard();
				break;
			case 'btn_team':
				openTeam();
				break;
		}
	}
	
	
	var imgs = _.reduce( $('img'), function(start, img2){
		var id = $(img2).attr('id')
		var obj = {}
		obj[id] = img2
		return _.extend( start, obj )
	}, {})
	
	var divDom = $('#div' )
	var drawDiv = particleDrawer.dom( divDom )
	
	var w = divDom.width()
	var h = divDom.height()
	
	var pool = particle.pool( 200 )
	var ps = particle.particleSystem(pool, function( type, key ){
		if( type == 'div' ){
			return imgs[key]
		}
		return null
	})
	var last = new Date().getTime()
	setTimeout( function(){
		var now = new Date().getTime()
		var elap = (now - last)/ 1000.0
		last = now
		
		ps.clearOutBound( w, h )
		ps.step( elap )
		ps.draw( drawDiv )
		setTimeout( arguments.callee, 1000.0/30 )
	}, 0)
	
	var snowConfig = [{"id":0,"name":"發射器","lifetime":0,"vel":[0,0,0],"pos":[860,0,0],"mass":1,"color":[1,1,1,0],"size":[40,40],"tex":"glow_128_128","blending":"add","formulaList":[],"emit":{"prototype":[{"id":"1","name":"粒子","lifetime":6,"vel":[51,136,0],"pos":[0,0,0],"mass":1,"color":[1,1,1,1],"size":[14,15],"tex":"glow_png_128_128","blending":"normal","formulaList":[["lifetime","randStartAdd",2,0,0,0,0],["vy","randAdd",12,0,0,0,0],["vx","randAdd",18,0,0,0,0],["y","randStartAdd",252,0,0,0,0],["x","randStartAdd",1200,0,0,0,0],["rot","randStartAdd",6.283185307179586,0,0,0,0],["scale-y","randStartAdd",15,0,0,0,0],["scale-x","randStartAdd",15,0,0,0,0],["a","custom",0,0.5,1,0.5,0]]}],"count":1,"duration":0.300,"angle":0,"range":0,"force":0}}]
	//var particleConfig = [{"id":0,"name":"發射器","lifetime":0,"vel":[0,0,0],"pos":[236,382,0],"mass":1,"color":[1,1,1,0],"size":[40,40],"tex":"glow_128_128","blending":"add","formulaList":[],"emit":{"prototype":[{"id":"1","name":"粒子","lifetime":0.3,"vel":[0,0,0],"pos":[0,0,0],"mass":1,"color":[1,1,1,1],"size":[40,40],"tex":"glow_color_png_128_128","blending":"normal","formulaList":[["lifetime","randStartAdd",0.1,0,0,0,0],["scale-y","custom",106,33,19,27,0],["scale-x","custom",106,41,25,22,0]]}],"count":1,"duration":0.019,"angle":0,"range":0,"force":0}},{"id":"0652790d-0a2f-4408-810b-6bc4592373bf","name":"0652790d-0a2f-4408-810b-6bc4592373bf","lifetime":0,"vel":[0,0,0],"pos":[236,382,0],"mass":1,"color":[1,1,1,0],"size":[40,40],"tex":"0","blending":"add","formulaList":[],"emit":{"count":1,"duration":0.05,"angle":0,"range":0,"force":0,"prototype":[{"id":"9f0eb3f5-d82e-474c-a419-ec8916404988","name":"9f0eb3f5-d82e-474c-a419-ec8916404988","lifetime":0.6,"vel":[0,0,0],"pos":[0,0,0],"mass":1,"color":[1,1,1,1],"size":[40,40],"tex":"glow_color_png_128_128","blending":"normal","formulaList":[["lifetime","randStartAdd",0.1,0,0,0,0],["vy","randStartAdd",246,0,0,0,0],["vx","randStartAdd",213,0,0,0,0],["scale-x","custom",0,24,49,36,0],["scale-y","custom",0,24,49,36,0]]}]}}];
	//var particleConfig = [{"id":0,"name":"發射器","lifetime":0,"vel":[0,0,0],"pos":[309,499,0],"mass":1,"color":[1,1,1,0],"size":[40,40],"tex":"glow_128_128","blending":"normal","formulaList":[],"emit":{"prototype":[{"id":"1","name":"粒子","lifetime":0.329,"vel":[0,0,0],"pos":[0,0,0],"mass":1,"color":[1,1,1,1],"size":[40,40],"tex":"glow_png_128_128","blending":"normal","formulaList":[["lifetime","randStartAdd",0.229,0,0,0,0],["scale-y","custom",0,25,50,25,0],["scale-x","custom",0,25,50,25,0]],"emit":{"count":1,"duration":0.116,"angle":0,"range":0,"force":0,"prototype":[{"id":"9bd78069-f8dd-4246-bd94-5aee311c0297","name":"small","lifetime":0.751,"vel":[0,0,0],"pos":[0,0,0],"mass":1,"color":[1,1,1,1],"size":[40,40],"tex":"glow_png_128_128","blending":"normal","formulaList":[["lifetime","randStartAdd",0.1,0,0,0,0],["vy","randAdd",100,0,0,0,0],["vx","randAdd",100,0,0,0,0],["scale-y","constMul",0.9,0,0,0,0],["scale-x","constMul",0.9,0,0,0,0]]}]}}],"count":1,"duration":0.053,"angle":0,"range":0,"force":0}}];
	var particleConfig = [{"id":0,"name":"發射器","lifetime":0,"vel":[0,0,0],"pos":[252,228,0],"mass":1,"color":[1,1,1,0],"size":[40,40],"tex":"glow_128_128","blending":"normal","formulaList":[],"emit":{"prototype":[{"id":"1","name":"粒子","lifetime":0.55,"vel":[0,0,4.328416544945937],"pos":[0,0,0],"mass":1,"color":[1,1,1,1],"size":[40,40],"tex":"cornerGlow_256_256","blending":"normal","formulaList":[["rot","randStartAdd",6.283185307179586,0,0,0,0],["scale-y","constMul",0.95,0,0,0,0],["scale-x","constMul",0.95,0,0,0,0],["a","constMul",0.95,0,0,0,0]]}],"count":1,"duration":0.1,"angle":0,"range":0,"force":0}}]
	//var explodeConfig = [{"id":0,"name":"發射器","lifetime":0.6,"vel":[0,0,0],"pos":[61,14,0],"mass":1,"color":[1,1,1,0],"size":[40,40],"tex":"glow_128_128","blending":"add","formulaList":[],"emit":{"prototype":[{"id":"1","name":"粒子","lifetime":0.3,"vel":[0,0,0],"pos":[0,0,0],"mass":1,"color":[1,1,1,1],"size":[40,40],"tex":"glow_color_png_128_128","blending":"normal","formulaList":[["x","randStartAdd",100,0,0,0,0],["y","randStartAdd",100,0,0,0,0],["vx","randStartAdd",100,0,0,0,0],["vy","randStartAdd",100,0,0,0,0],["lifetime","randStartAdd",0.1,0,0,0,0],["scale-y","custom",106,33,19,27,0],["scale-x","custom",106,41,25,22,0]]}],"count":1,"duration":0.019,"angle":0,"range":0,"force":0}}];
	//var explodeConfig = [{"id":"1","name":"粒子","lifetime":0.019,"vel":[0,0,0],"pos":[279,467,0],"mass":1,"color":[1,1,1,1],"size":[40,40],"tex":"glow_png_128_128","blending":"normal","formulaList":[["scale-y","custom",0,25,50,25,0],["scale-x","custom",0,25,50,25,0]],"emit":{"count":3,"duration":0.011,"angle":0,"range":0,"force":0,"prototype":[{"id":"9bd78069-f8dd-4246-bd94-5aee311c0297","name":"small","lifetime":0.751,"vel":[0,0,0],"pos":[0,0,0],"mass":1,"color":[1,1,1,1],"size":[40,40],"tex":"glow_png_128_128","blending":"normal","formulaList":[["lifetime","randStartAdd",0.1,0,0,0,0],["vy","randAdd",100,0,0,0,0],["vx","randAdd",100,0,0,0,0],["scale-y","constMul",0.887,0,0,0,0],["scale-x","constMul",0.886,0,0,0,0]]}]}}];
	//var explodeConfig = [{"id":0,"name":"發射器","lifetime":0.081,"vel":[0,0,0],"pos":[261,453,0],"mass":1,"color":[1,1,1,0],"size":[40,40],"tex":"glow_png_128_128","blending":"normal","formulaList":[],"emit":{"prototype":[{"id":"1","name":"粒子","lifetime":4,"vel":[0,0,0],"pos":[0,0,0],"mass":1,"color":[1,1,1,1],"size":[16,16],"tex":"glow_png_128_128","blending":"normal","formulaList":[["lifetime","randStartAdd",2,0,0,0,0],["vy","randAdd",100,0,0,0,0],["vx","randAdd",100,0,0,0,0],["vy","randStartAdd",3000,0,0,0,0],["vx","randStartAdd",3000,0,0,0,0],["scale-x","constMul",0.995,0,0,0,0],["scale-y","constMul",0.995,0,0,0,0],["vx","constMul",0.95,0,0,0,0],["vy","constMul",0.95,0,0,0,0]]}],"count":2,"duration":0.005,"angle":0,"range":0,"force":0}}]
	var explodeConfig = [{"id":0,"name":"發射器","lifetime":0.01,"vel":[0,0,0],"pos":[408,457,0],"mass":1,"color":[1,1,1,0],"size":[40,40],"tex":"glow_png_128_128","blending":"normal","formulaList":[],"emit":{"prototype":[{"id":"1","name":"粒子","lifetime":5,"vel":[0,0,0],"pos":[0,0,0],"mass":1,"color":[1,1,1,1],"size":[12,12],"tex":"glow_png_128_128","blending":"normal","formulaList":[["lifetime","randStartAdd",2,0,0,0,0],["vy","randAdd",100,0,0,0,0],["vx","randAdd",100,0,0,0,0],["vy","randStartAdd",3000,0,0,0,0],["vx","randStartAdd",3000,0,0,0,0],["scale-x","constMul",0.995,0,0,0,0],["scale-y","constMul",0.995,0,0,0,0],["vx","constMul",0.95,0,0,0,0],["vy","constMul",0.95,0,0,0,0],["a","constMul",0.987,0,0,0,0]]}],"count":1,"duration":0.005,"angle":0,"range":0,"force":0}}]
	
	ps.clear()
	var parts = addParticle(pool, particleConfig);
	var snowParts = addParticle( pool, snowConfig );
	
	function addParticle( pool, config ){
		var parts = particle.parseInput( pool, config );
		ps.emit( parts )
		return parts;
	}
	
	$( 'body' ).mousemove( function( e ){
		moveRootParticles( parts, e.pageX, e.pageY );
	});
	
	$( 'body' ).click( function( e ){
		var particles = addParticle( pool, deepCopy( explodeConfig ) );
		moveRootParticles( particles, e.pageX, e.pageY );
	});
	
	function moveRootParticles( particles, x, y ){
		if( particles == undefined ) return;
		_.each( particles, function( p ){
			p.pos[0]= x;
			p.pos[1]= y;
		});
	}
	
	function deepCopy( ori ){
		return JSON.parse( JSON.stringify( ori ) );
	}
	
	</script>
</body>