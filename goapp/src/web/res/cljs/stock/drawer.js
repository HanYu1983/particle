// Compiled by ClojureScript 0.0-2268
goog.provide('stock.drawer');
goog.require('cljs.core');
goog.require('stock.tool');
goog.require('stock.tool');
stock.drawer.max_v = (function (){var method_table__4417__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var prefer_table__4418__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var method_cache__4419__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var cached_hierarchy__4420__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var hierarchy__4421__auto__ = cljs.core.get.call(null,cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(null,"hierarchy","hierarchy",-1053470341),cljs.core.get_global_hierarchy.call(null));return (new cljs.core.MultiFn("max-v",((function (method_table__4417__auto__,prefer_table__4418__auto__,method_cache__4419__auto__,cached_hierarchy__4420__auto__,hierarchy__4421__auto__){
return (function (p__43410){var map__43411 = p__43410;var map__43411__$1 = ((cljs.core.seq_QMARK_.call(null,map__43411))?cljs.core.apply.call(null,cljs.core.hash_map,map__43411):map__43411);var t = cljs.core.get.call(null,map__43411__$1,new cljs.core.Keyword(null,"type","type",1174270348));return t;
});})(method_table__4417__auto__,prefer_table__4418__auto__,method_cache__4419__auto__,cached_hierarchy__4420__auto__,hierarchy__4421__auto__))
,new cljs.core.Keyword(null,"default","default",-1987822328),hierarchy__4421__auto__,method_table__4417__auto__,prefer_table__4418__auto__,method_cache__4419__auto__,cached_hierarchy__4420__auto__));
})();
stock.drawer.min_v = (function (){var method_table__4417__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var prefer_table__4418__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var method_cache__4419__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var cached_hierarchy__4420__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var hierarchy__4421__auto__ = cljs.core.get.call(null,cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(null,"hierarchy","hierarchy",-1053470341),cljs.core.get_global_hierarchy.call(null));return (new cljs.core.MultiFn("min-v",((function (method_table__4417__auto__,prefer_table__4418__auto__,method_cache__4419__auto__,cached_hierarchy__4420__auto__,hierarchy__4421__auto__){
return (function (p__43412){var map__43413 = p__43412;var map__43413__$1 = ((cljs.core.seq_QMARK_.call(null,map__43413))?cljs.core.apply.call(null,cljs.core.hash_map,map__43413):map__43413);var t = cljs.core.get.call(null,map__43413__$1,new cljs.core.Keyword(null,"type","type",1174270348));return t;
});})(method_table__4417__auto__,prefer_table__4418__auto__,method_cache__4419__auto__,cached_hierarchy__4420__auto__,hierarchy__4421__auto__))
,new cljs.core.Keyword(null,"default","default",-1987822328),hierarchy__4421__auto__,method_table__4417__auto__,prefer_table__4418__auto__,method_cache__4419__auto__,cached_hierarchy__4420__auto__));
})();
stock.drawer.length = (function (){var method_table__4417__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var prefer_table__4418__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var method_cache__4419__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var cached_hierarchy__4420__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var hierarchy__4421__auto__ = cljs.core.get.call(null,cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(null,"hierarchy","hierarchy",-1053470341),cljs.core.get_global_hierarchy.call(null));return (new cljs.core.MultiFn("length",((function (method_table__4417__auto__,prefer_table__4418__auto__,method_cache__4419__auto__,cached_hierarchy__4420__auto__,hierarchy__4421__auto__){
return (function (p__43414){var map__43415 = p__43414;var map__43415__$1 = ((cljs.core.seq_QMARK_.call(null,map__43415))?cljs.core.apply.call(null,cljs.core.hash_map,map__43415):map__43415);var t = cljs.core.get.call(null,map__43415__$1,new cljs.core.Keyword(null,"type","type",1174270348));return t;
});})(method_table__4417__auto__,prefer_table__4418__auto__,method_cache__4419__auto__,cached_hierarchy__4420__auto__,hierarchy__4421__auto__))
,new cljs.core.Keyword(null,"default","default",-1987822328),hierarchy__4421__auto__,method_table__4417__auto__,prefer_table__4418__auto__,method_cache__4419__auto__,cached_hierarchy__4420__auto__));
})();
stock.drawer.draw_it = (function (){var method_table__4417__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var prefer_table__4418__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var method_cache__4419__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var cached_hierarchy__4420__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var hierarchy__4421__auto__ = cljs.core.get.call(null,cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(null,"hierarchy","hierarchy",-1053470341),cljs.core.get_global_hierarchy.call(null));return (new cljs.core.MultiFn("draw-it",((function (method_table__4417__auto__,prefer_table__4418__auto__,method_cache__4419__auto__,cached_hierarchy__4420__auto__,hierarchy__4421__auto__){
return (function (p__43416,base,ctx){var map__43417 = p__43416;var map__43417__$1 = ((cljs.core.seq_QMARK_.call(null,map__43417))?cljs.core.apply.call(null,cljs.core.hash_map,map__43417):map__43417);var t = cljs.core.get.call(null,map__43417__$1,new cljs.core.Keyword(null,"type","type",1174270348));return t;
});})(method_table__4417__auto__,prefer_table__4418__auto__,method_cache__4419__auto__,cached_hierarchy__4420__auto__,hierarchy__4421__auto__))
,new cljs.core.Keyword(null,"default","default",-1987822328),hierarchy__4421__auto__,method_table__4417__auto__,prefer_table__4418__auto__,method_cache__4419__auto__,cached_hierarchy__4420__auto__));
})();
stock.drawer.graphic_base = (function graphic_base(w,h,drawers){var max_v = cljs.core.apply.call(null,cljs.core.max,cljs.core.map.call(null,stock.drawer.max_v,drawers));var min_v = cljs.core.apply.call(null,cljs.core.min,cljs.core.map.call(null,stock.drawer.min_v,drawers));var len_v = cljs.core.apply.call(null,cljs.core.max,cljs.core.map.call(null,stock.drawer.length,drawers));var offset_v = (max_v - min_v);var offset_x = (w / (len_v + (1)));var pos_y = ((function (max_v,min_v,len_v,offset_v,offset_x){
return (function (v){return (h * ((1) - ((v - min_v) / offset_v)));
});})(max_v,min_v,len_v,offset_v,offset_x))
;return new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, [w,h,max_v,min_v,offset_v,offset_x,pos_y], null);
});
stock.drawer.draw = (function draw(p__43418,w,h,ctx){var map__43424 = p__43418;var map__43424__$1 = ((cljs.core.seq_QMARK_.call(null,map__43424))?cljs.core.apply.call(null,cljs.core.hash_map,map__43424):map__43424);var info = map__43424__$1;var drawers = cljs.core.get.call(null,map__43424__$1,new cljs.core.Keyword(null,"drawers","drawers",-1652645568));var base = stock.drawer.graphic_base.call(null,w,h,drawers);(ctx["fillStyle"] = "lightgray");
ctx.fillRect((0),(0),w,h);
var seq__43425 = cljs.core.seq.call(null,drawers);var chunk__43426 = null;var count__43427 = (0);var i__43428 = (0);while(true){
if((i__43428 < count__43427))
{var drawer = cljs.core._nth.call(null,chunk__43426,i__43428);ctx.save();
stock.drawer.draw_it.call(null,drawer,base,ctx);
ctx.restore();
{
var G__43429 = seq__43425;
var G__43430 = chunk__43426;
var G__43431 = count__43427;
var G__43432 = (i__43428 + (1));
seq__43425 = G__43429;
chunk__43426 = G__43430;
count__43427 = G__43431;
i__43428 = G__43432;
continue;
}
} else
{var temp__4126__auto__ = cljs.core.seq.call(null,seq__43425);if(temp__4126__auto__)
{var seq__43425__$1 = temp__4126__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__43425__$1))
{var c__4307__auto__ = cljs.core.chunk_first.call(null,seq__43425__$1);{
var G__43433 = cljs.core.chunk_rest.call(null,seq__43425__$1);
var G__43434 = c__4307__auto__;
var G__43435 = cljs.core.count.call(null,c__4307__auto__);
var G__43436 = (0);
seq__43425 = G__43433;
chunk__43426 = G__43434;
count__43427 = G__43435;
i__43428 = G__43436;
continue;
}
} else
{var drawer = cljs.core.first.call(null,seq__43425__$1);ctx.save();
stock.drawer.draw_it.call(null,drawer,base,ctx);
ctx.restore();
{
var G__43437 = cljs.core.next.call(null,seq__43425__$1);
var G__43438 = null;
var G__43439 = (0);
var G__43440 = (0);
seq__43425 = G__43437;
chunk__43426 = G__43438;
count__43427 = G__43439;
i__43428 = G__43440;
continue;
}
}
} else
{return null;
}
}
break;
}
});
cljs.core._add_method.call(null,stock.drawer.max_v,new cljs.core.Keyword(null,"default","default",-1987822328),(function (info){return (0);
}));
cljs.core._add_method.call(null,stock.drawer.min_v,new cljs.core.Keyword(null,"default","default",-1987822328),(function (info){return (0);
}));
cljs.core._add_method.call(null,stock.drawer.length,new cljs.core.Keyword(null,"default","default",-1987822328),(function (info){return (0);
}));
cljs.core._add_method.call(null,stock.drawer.draw_it,new cljs.core.Keyword(null,"default","default",-1987822328),(function (info,base,ctx){return null;
}));
cljs.core._add_method.call(null,stock.drawer.max_v,new cljs.core.Keyword(null,"line","line",212345235),(function (p__43441){var map__43442 = p__43441;var map__43442__$1 = ((cljs.core.seq_QMARK_.call(null,map__43442))?cljs.core.apply.call(null,cljs.core.hash_map,map__43442):map__43442);var line = cljs.core.get.call(null,map__43442__$1,new cljs.core.Keyword(null,"line","line",212345235));return cljs.core.apply.call(null,cljs.core.max,line);
}));
cljs.core._add_method.call(null,stock.drawer.min_v,new cljs.core.Keyword(null,"line","line",212345235),(function (p__43443){var map__43444 = p__43443;var map__43444__$1 = ((cljs.core.seq_QMARK_.call(null,map__43444))?cljs.core.apply.call(null,cljs.core.hash_map,map__43444):map__43444);var line = cljs.core.get.call(null,map__43444__$1,new cljs.core.Keyword(null,"line","line",212345235));return cljs.core.apply.call(null,cljs.core.min,line);
}));
cljs.core._add_method.call(null,stock.drawer.length,new cljs.core.Keyword(null,"line","line",212345235),(function (p__43445){var map__43446 = p__43445;var map__43446__$1 = ((cljs.core.seq_QMARK_.call(null,map__43446))?cljs.core.apply.call(null,cljs.core.hash_map,map__43446):map__43446);var line = cljs.core.get.call(null,map__43446__$1,new cljs.core.Keyword(null,"line","line",212345235));return cljs.core.count.call(null,line);
}));
cljs.core._add_method.call(null,stock.drawer.draw_it,new cljs.core.Keyword(null,"line","line",212345235),(function (p__43447,base,ctx){var map__43448 = p__43447;var map__43448__$1 = ((cljs.core.seq_QMARK_.call(null,map__43448))?cljs.core.apply.call(null,cljs.core.hash_map,map__43448):map__43448);var line = cljs.core.get.call(null,map__43448__$1,new cljs.core.Keyword(null,"line","line",212345235));var color = cljs.core.get.call(null,map__43448__$1,new cljs.core.Keyword(null,"color","color",1011675173));var offset = cljs.core.get.call(null,map__43448__$1,new cljs.core.Keyword(null,"offset","offset",296498311));var vec__43449 = base;var w = cljs.core.nth.call(null,vec__43449,(0),null);var h = cljs.core.nth.call(null,vec__43449,(1),null);var max_v = cljs.core.nth.call(null,vec__43449,(2),null);var min_v = cljs.core.nth.call(null,vec__43449,(3),null);var offset_v = cljs.core.nth.call(null,vec__43449,(4),null);var offset_x = cljs.core.nth.call(null,vec__43449,(5),null);var pos_y = cljs.core.nth.call(null,vec__43449,(6),null);var offset__$1 = (function (){var or__3551__auto__ = offset;if(cljs.core.truth_(or__3551__auto__))
{return or__3551__auto__;
} else
{return (0);
}
})();(ctx["strokeStyle"] = color);
var seq__43450 = cljs.core.seq.call(null,cljs.core.map.call(null,((function (vec__43449,w,h,max_v,min_v,offset_v,offset_x,pos_y,offset__$1,map__43448,map__43448__$1,line,color,offset){
return (function() { 
var G__43456__delegate = function (args){return args;
};
var G__43456 = function (var_args){
var args = null;if (arguments.length > 0) {
  args = cljs.core.array_seq(Array.prototype.slice.call(arguments, 0),0);} 
return G__43456__delegate.call(this,args);};
G__43456.cljs$lang$maxFixedArity = 0;
G__43456.cljs$lang$applyTo = (function (arglist__43457){
var args = cljs.core.seq(arglist__43457);
return G__43456__delegate(args);
});
G__43456.cljs$core$IFn$_invoke$arity$variadic = G__43456__delegate;
return G__43456;
})()
;})(vec__43449,w,h,max_v,min_v,offset_v,offset_x,pos_y,offset__$1,map__43448,map__43448__$1,line,color,offset))
,cljs.core.map.call(null,cljs.core.inc,cljs.core.range.call(null,cljs.core.count.call(null,line))),line,cljs.core.rest.call(null,line)));var chunk__43451 = null;var count__43452 = (0);var i__43453 = (0);while(true){
if((i__43453 < count__43452))
{var vec__43454 = cljs.core._nth.call(null,chunk__43451,i__43453);var idx = cljs.core.nth.call(null,vec__43454,(0),null);var prev = cljs.core.nth.call(null,vec__43454,(1),null);var curr = cljs.core.nth.call(null,vec__43454,(2),null);(ctx["lineWidth"] = (1));
ctx.beginPath();
ctx.moveTo(((idx + offset__$1) * offset_x),pos_y.call(null,prev));
ctx.lineTo((((idx + offset__$1) + (1)) * offset_x),pos_y.call(null,curr));
ctx.stroke();
{
var G__43458 = seq__43450;
var G__43459 = chunk__43451;
var G__43460 = count__43452;
var G__43461 = (i__43453 + (1));
seq__43450 = G__43458;
chunk__43451 = G__43459;
count__43452 = G__43460;
i__43453 = G__43461;
continue;
}
} else
{var temp__4126__auto__ = cljs.core.seq.call(null,seq__43450);if(temp__4126__auto__)
{var seq__43450__$1 = temp__4126__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__43450__$1))
{var c__4307__auto__ = cljs.core.chunk_first.call(null,seq__43450__$1);{
var G__43462 = cljs.core.chunk_rest.call(null,seq__43450__$1);
var G__43463 = c__4307__auto__;
var G__43464 = cljs.core.count.call(null,c__4307__auto__);
var G__43465 = (0);
seq__43450 = G__43462;
chunk__43451 = G__43463;
count__43452 = G__43464;
i__43453 = G__43465;
continue;
}
} else
{var vec__43455 = cljs.core.first.call(null,seq__43450__$1);var idx = cljs.core.nth.call(null,vec__43455,(0),null);var prev = cljs.core.nth.call(null,vec__43455,(1),null);var curr = cljs.core.nth.call(null,vec__43455,(2),null);(ctx["lineWidth"] = (1));
ctx.beginPath();
ctx.moveTo(((idx + offset__$1) * offset_x),pos_y.call(null,prev));
ctx.lineTo((((idx + offset__$1) + (1)) * offset_x),pos_y.call(null,curr));
ctx.stroke();
{
var G__43466 = cljs.core.next.call(null,seq__43450__$1);
var G__43467 = null;
var G__43468 = (0);
var G__43469 = (0);
seq__43450 = G__43466;
chunk__43451 = G__43467;
count__43452 = G__43468;
i__43453 = G__43469;
continue;
}
}
} else
{return null;
}
}
break;
}
}));
cljs.core._add_method.call(null,stock.drawer.max_v,new cljs.core.Keyword(null,"kline","kline",-1160432594),(function (p__43470){var map__43471 = p__43470;var map__43471__$1 = ((cljs.core.seq_QMARK_.call(null,map__43471))?cljs.core.apply.call(null,cljs.core.hash_map,map__43471):map__43471);var kline = cljs.core.get.call(null,map__43471__$1,new cljs.core.Keyword(null,"kline","kline",-1160432594));return cljs.core.apply.call(null,cljs.core.max,stock.tool.high.call(null,kline));
}));
cljs.core._add_method.call(null,stock.drawer.min_v,new cljs.core.Keyword(null,"kline","kline",-1160432594),(function (p__43472){var map__43473 = p__43472;var map__43473__$1 = ((cljs.core.seq_QMARK_.call(null,map__43473))?cljs.core.apply.call(null,cljs.core.hash_map,map__43473):map__43473);var kline = cljs.core.get.call(null,map__43473__$1,new cljs.core.Keyword(null,"kline","kline",-1160432594));return cljs.core.apply.call(null,cljs.core.min,stock.tool.low.call(null,kline));
}));
cljs.core._add_method.call(null,stock.drawer.length,new cljs.core.Keyword(null,"kline","kline",-1160432594),(function (p__43474){var map__43475 = p__43474;var map__43475__$1 = ((cljs.core.seq_QMARK_.call(null,map__43475))?cljs.core.apply.call(null,cljs.core.hash_map,map__43475):map__43475);var kline = cljs.core.get.call(null,map__43475__$1,new cljs.core.Keyword(null,"kline","kline",-1160432594));return cljs.core.count.call(null,kline);
}));
cljs.core._add_method.call(null,stock.drawer.draw_it,new cljs.core.Keyword(null,"kline","kline",-1160432594),(function (p__43476,base,ctx){var map__43477 = p__43476;var map__43477__$1 = ((cljs.core.seq_QMARK_.call(null,map__43477))?cljs.core.apply.call(null,cljs.core.hash_map,map__43477):map__43477);var kline = cljs.core.get.call(null,map__43477__$1,new cljs.core.Keyword(null,"kline","kline",-1160432594));var info = cljs.core.get.call(null,map__43477__$1,new cljs.core.Keyword(null,"info","info",-317069002));var vec__43478 = base;var w = cljs.core.nth.call(null,vec__43478,(0),null);var h = cljs.core.nth.call(null,vec__43478,(1),null);var max_v = cljs.core.nth.call(null,vec__43478,(2),null);var min_v = cljs.core.nth.call(null,vec__43478,(3),null);var offset_v = cljs.core.nth.call(null,vec__43478,(4),null);var offset_x = cljs.core.nth.call(null,vec__43478,(5),null);var pos_y = cljs.core.nth.call(null,vec__43478,(6),null);(ctx["fillStyle"] = "black");
var seq__43479 = cljs.core.seq.call(null,cljs.core.map.call(null,((function (vec__43478,w,h,max_v,min_v,offset_v,offset_x,pos_y,map__43477,map__43477__$1,kline,info){
return (function() { 
var G__43487__delegate = function (args){return args;
};
var G__43487 = function (var_args){
var args = null;if (arguments.length > 0) {
  args = cljs.core.array_seq(Array.prototype.slice.call(arguments, 0),0);} 
return G__43487__delegate.call(this,args);};
G__43487.cljs$lang$maxFixedArity = 0;
G__43487.cljs$lang$applyTo = (function (arglist__43488){
var args = cljs.core.seq(arglist__43488);
return G__43487__delegate(args);
});
G__43487.cljs$core$IFn$_invoke$arity$variadic = G__43487__delegate;
return G__43487;
})()
;})(vec__43478,w,h,max_v,min_v,offset_v,offset_x,pos_y,map__43477,map__43477__$1,kline,info))
,cljs.core.map.call(null,cljs.core.inc,cljs.core.range.call(null,cljs.core.count.call(null,kline))),kline,(function (){var or__3551__auto__ = info;if(cljs.core.truth_(or__3551__auto__))
{return or__3551__auto__;
} else
{return kline;
}
})()));var chunk__43480 = null;var count__43481 = (0);var i__43482 = (0);while(true){
if((i__43482 < count__43481))
{var vec__43483 = cljs.core._nth.call(null,chunk__43480,i__43482);var idx = cljs.core.nth.call(null,vec__43483,(0),null);var vec__43484 = cljs.core.nth.call(null,vec__43483,(1),null);var date = cljs.core.nth.call(null,vec__43484,(0),null);var open = cljs.core.nth.call(null,vec__43484,(1),null);var high = cljs.core.nth.call(null,vec__43484,(2),null);var low = cljs.core.nth.call(null,vec__43484,(3),null);var close = cljs.core.nth.call(null,vec__43484,(4),null);var volume = cljs.core.nth.call(null,vec__43484,(5),null);var info__$1 = cljs.core.nth.call(null,vec__43483,(2),null);(ctx["strokeStyle"] = (((close > open))?"red":"green"));
(ctx["lineWidth"] = (2));
ctx.beginPath();
ctx.moveTo((idx * offset_x),pos_y.call(null,low));
ctx.lineTo((idx * offset_x),pos_y.call(null,high));
ctx.stroke();
(ctx["strokeStyle"] = (((close > open))?"red":"green"));
(ctx["lineWidth"] = offset_x);
ctx.beginPath();
ctx.moveTo((idx * offset_x),pos_y.call(null,open));
ctx.lineTo((idx * offset_x),(pos_y.call(null,open) + (1)));
ctx.lineTo((idx * offset_x),pos_y.call(null,close));
ctx.stroke();
{
var G__43489 = seq__43479;
var G__43490 = chunk__43480;
var G__43491 = count__43481;
var G__43492 = (i__43482 + (1));
seq__43479 = G__43489;
chunk__43480 = G__43490;
count__43481 = G__43491;
i__43482 = G__43492;
continue;
}
} else
{var temp__4126__auto__ = cljs.core.seq.call(null,seq__43479);if(temp__4126__auto__)
{var seq__43479__$1 = temp__4126__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__43479__$1))
{var c__4307__auto__ = cljs.core.chunk_first.call(null,seq__43479__$1);{
var G__43493 = cljs.core.chunk_rest.call(null,seq__43479__$1);
var G__43494 = c__4307__auto__;
var G__43495 = cljs.core.count.call(null,c__4307__auto__);
var G__43496 = (0);
seq__43479 = G__43493;
chunk__43480 = G__43494;
count__43481 = G__43495;
i__43482 = G__43496;
continue;
}
} else
{var vec__43485 = cljs.core.first.call(null,seq__43479__$1);var idx = cljs.core.nth.call(null,vec__43485,(0),null);var vec__43486 = cljs.core.nth.call(null,vec__43485,(1),null);var date = cljs.core.nth.call(null,vec__43486,(0),null);var open = cljs.core.nth.call(null,vec__43486,(1),null);var high = cljs.core.nth.call(null,vec__43486,(2),null);var low = cljs.core.nth.call(null,vec__43486,(3),null);var close = cljs.core.nth.call(null,vec__43486,(4),null);var volume = cljs.core.nth.call(null,vec__43486,(5),null);var info__$1 = cljs.core.nth.call(null,vec__43485,(2),null);(ctx["strokeStyle"] = (((close > open))?"red":"green"));
(ctx["lineWidth"] = (2));
ctx.beginPath();
ctx.moveTo((idx * offset_x),pos_y.call(null,low));
ctx.lineTo((idx * offset_x),pos_y.call(null,high));
ctx.stroke();
(ctx["strokeStyle"] = (((close > open))?"red":"green"));
(ctx["lineWidth"] = offset_x);
ctx.beginPath();
ctx.moveTo((idx * offset_x),pos_y.call(null,open));
ctx.lineTo((idx * offset_x),(pos_y.call(null,open) + (1)));
ctx.lineTo((idx * offset_x),pos_y.call(null,close));
ctx.stroke();
{
var G__43497 = cljs.core.next.call(null,seq__43479__$1);
var G__43498 = null;
var G__43499 = (0);
var G__43500 = (0);
seq__43479 = G__43497;
chunk__43480 = G__43498;
count__43481 = G__43499;
i__43482 = G__43500;
continue;
}
}
} else
{return null;
}
}
break;
}
}));
cljs.core._add_method.call(null,stock.drawer.max_v,new cljs.core.Keyword(null,"clock","clock",-894301127),(function (p__43501){var map__43502 = p__43501;var map__43502__$1 = ((cljs.core.seq_QMARK_.call(null,map__43502))?cljs.core.apply.call(null,cljs.core.hash_map,map__43502):map__43502);var cz = cljs.core.get.call(null,map__43502__$1,new cljs.core.Keyword(null,"cz","cz",1670864932));return cljs.core.apply.call(null,cljs.core.max,cz);
}));
cljs.core._add_method.call(null,stock.drawer.min_v,new cljs.core.Keyword(null,"clock","clock",-894301127),(function (p__43503){var map__43504 = p__43503;var map__43504__$1 = ((cljs.core.seq_QMARK_.call(null,map__43504))?cljs.core.apply.call(null,cljs.core.hash_map,map__43504):map__43504);var cz = cljs.core.get.call(null,map__43504__$1,new cljs.core.Keyword(null,"cz","cz",1670864932));return cljs.core.apply.call(null,cljs.core.min,cz);
}));
cljs.core._add_method.call(null,stock.drawer.draw_it,new cljs.core.Keyword(null,"clock","clock",-894301127),(function (p__43505,base,ctx){var map__43506 = p__43505;var map__43506__$1 = ((cljs.core.seq_QMARK_.call(null,map__43506))?cljs.core.apply.call(null,cljs.core.hash_map,map__43506):map__43506);var cz = cljs.core.get.call(null,map__43506__$1,new cljs.core.Keyword(null,"cz","cz",1670864932));var vz = cljs.core.get.call(null,map__43506__$1,new cljs.core.Keyword(null,"vz","vz",-575323393));var color = cljs.core.get.call(null,map__43506__$1,new cljs.core.Keyword(null,"color","color",1011675173));var vec__43507 = base;var w = cljs.core.nth.call(null,vec__43507,(0),null);var h = cljs.core.nth.call(null,vec__43507,(1),null);var max_v = cljs.core.nth.call(null,vec__43507,(2),null);var min_v = cljs.core.nth.call(null,vec__43507,(3),null);var offset_v = cljs.core.nth.call(null,vec__43507,(4),null);var offset_x = cljs.core.nth.call(null,vec__43507,(5),null);var pos_y = cljs.core.nth.call(null,vec__43507,(6),null);var proj_x = ((function (vec__43507,w,h,max_v,min_v,offset_v,offset_x,pos_y,map__43506,map__43506__$1,cz,vz,color){
return (function (v){return ((v * (w / (8))) + (w / (2)));
});})(vec__43507,w,h,max_v,min_v,offset_v,offset_x,pos_y,map__43506,map__43506__$1,cz,vz,color))
;var proj_y = ((function (vec__43507,w,h,max_v,min_v,offset_v,offset_x,pos_y,proj_x,map__43506,map__43506__$1,cz,vz,color){
return (function (v){return (((v * (h / (8))) * (-1)) + (h / (2)));
});})(vec__43507,w,h,max_v,min_v,offset_v,offset_x,pos_y,proj_x,map__43506,map__43506__$1,cz,vz,color))
;(ctx["fillStyle"] = color);
(ctx["strokeStyle"] = color);
var seq__43508 = cljs.core.seq.call(null,cljs.core.map.call(null,((function (vec__43507,w,h,max_v,min_v,offset_v,offset_x,pos_y,proj_x,proj_y,map__43506,map__43506__$1,cz,vz,color){
return (function() { 
var G__43514__delegate = function (args){return args;
};
var G__43514 = function (var_args){
var args = null;if (arguments.length > 0) {
  args = cljs.core.array_seq(Array.prototype.slice.call(arguments, 0),0);} 
return G__43514__delegate.call(this,args);};
G__43514.cljs$lang$maxFixedArity = 0;
G__43514.cljs$lang$applyTo = (function (arglist__43515){
var args = cljs.core.seq(arglist__43515);
return G__43514__delegate(args);
});
G__43514.cljs$core$IFn$_invoke$arity$variadic = G__43514__delegate;
return G__43514;
})()
;})(vec__43507,w,h,max_v,min_v,offset_v,offset_x,pos_y,proj_x,proj_y,map__43506,map__43506__$1,cz,vz,color))
,cljs.core.range.call(null,cljs.core.count.call(null,cz)),cz,cljs.core.rest.call(null,cz),vz,cljs.core.rest.call(null,vz)));var chunk__43509 = null;var count__43510 = (0);var i__43511 = (0);while(true){
if((i__43511 < count__43510))
{var vec__43512 = cljs.core._nth.call(null,chunk__43509,i__43511);var idx = cljs.core.nth.call(null,vec__43512,(0),null);var pc = cljs.core.nth.call(null,vec__43512,(1),null);var cc = cljs.core.nth.call(null,vec__43512,(2),null);var pv = cljs.core.nth.call(null,vec__43512,(3),null);var cv = cljs.core.nth.call(null,vec__43512,(4),null);ctx.fillText((''+cljs.core.str.cljs$core$IFn$_invoke$arity$1(idx)),proj_x.call(null,pv),proj_y.call(null,pc));
ctx.beginPath();
ctx.moveTo(proj_x.call(null,pv),proj_y.call(null,pc));
ctx.lineTo(proj_x.call(null,cv),proj_y.call(null,cc));
ctx.stroke();
{
var G__43516 = seq__43508;
var G__43517 = chunk__43509;
var G__43518 = count__43510;
var G__43519 = (i__43511 + (1));
seq__43508 = G__43516;
chunk__43509 = G__43517;
count__43510 = G__43518;
i__43511 = G__43519;
continue;
}
} else
{var temp__4126__auto__ = cljs.core.seq.call(null,seq__43508);if(temp__4126__auto__)
{var seq__43508__$1 = temp__4126__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__43508__$1))
{var c__4307__auto__ = cljs.core.chunk_first.call(null,seq__43508__$1);{
var G__43520 = cljs.core.chunk_rest.call(null,seq__43508__$1);
var G__43521 = c__4307__auto__;
var G__43522 = cljs.core.count.call(null,c__4307__auto__);
var G__43523 = (0);
seq__43508 = G__43520;
chunk__43509 = G__43521;
count__43510 = G__43522;
i__43511 = G__43523;
continue;
}
} else
{var vec__43513 = cljs.core.first.call(null,seq__43508__$1);var idx = cljs.core.nth.call(null,vec__43513,(0),null);var pc = cljs.core.nth.call(null,vec__43513,(1),null);var cc = cljs.core.nth.call(null,vec__43513,(2),null);var pv = cljs.core.nth.call(null,vec__43513,(3),null);var cv = cljs.core.nth.call(null,vec__43513,(4),null);ctx.fillText((''+cljs.core.str.cljs$core$IFn$_invoke$arity$1(idx)),proj_x.call(null,pv),proj_y.call(null,pc));
ctx.beginPath();
ctx.moveTo(proj_x.call(null,pv),proj_y.call(null,pc));
ctx.lineTo(proj_x.call(null,cv),proj_y.call(null,cc));
ctx.stroke();
{
var G__43524 = cljs.core.next.call(null,seq__43508__$1);
var G__43525 = null;
var G__43526 = (0);
var G__43527 = (0);
seq__43508 = G__43524;
chunk__43509 = G__43525;
count__43510 = G__43526;
i__43511 = G__43527;
continue;
}
}
} else
{return null;
}
}
break;
}
}));
