<html>
	<head>
		<link rel="stylesheet" type="text/css" href="res/js/lib/jquery-easyui-1.4.3/themes/black/easyui.css">
		<link rel="stylesheet" type="text/css" href="res/js/lib/jquery-easyui-1.4.3/themes/icon.css">
		<link rel="stylesheet" type="text/css" href="res/js/lib/jquery-easyui-1.4.3/demo/demo.css">
		<link rel="stylesheet" type="text/css" href="res/css/normalize.css">
			
		<script type="text/javascript" src="res/js/lib/jquery-easyui-1.4.3/jquery.min.js"></script>
		<script type="text/javascript" src="res/js/lib/jquery-easyui-1.4.3/jquery.easyui.min.js"></script>
		
		<script type="text/javascript" src="res/js/lib/spectrum/spectrum.js"></script>
		<link rel="stylesheet" type="text/css" href="res/js/lib/spectrum/spectrum.css">
	</head>
	<style>
	body{
		position:absolute;
		width:100%;
		height:100%;
		left:0;
		top:0;
		background-color:black;
	}
	.lbl_prop{
		float:left;
		width:35px;
		margin-left:10px;
		margin-right:5px;
	}
	.particle_title{
		width:150px;
		margin-left:10px;
		line-height:25px;
	}
	.propGroup{
		width:100%;
		height:25px;
		min-width:300px;
	}
	.prop{
		float:left;
		margin-bottom:10px;
	}
	</style>
	<body>
		<div class="easyui-layout" style="width:95%;height:95%;">
			<div data-options="region:'north'" style="height:30px">
				<a href="#" class="easyui-linkbutton" data-options="plain:true">Home</a>
				<a href="#" class="easyui-menubutton" data-options="menu:'#mm1',iconCls:'icon-edit'">Edit</a>
				<a href="#" class="easyui-menubutton" data-options="menu:'#mm2',iconCls:'icon-help'">Help</a>
				<a href="#" class="easyui-menubutton" data-options="menu:'#mm3'">About</a>
			</div>
			<div data-options="region:'west',split:true" title="Properties" style="width:20%; height:100%">
				<a href="#" class="easyui-menubutton" data-options="menu:'#menu_particleTree',iconCls:'icon-edit'">Edit</a>
				<div class="easyui-panel" style="padding:5px; width:100%; height:20%;">
					
					<ul id="tree_particle" class="easyui-tree" data-options="dnd:true">
						<li>
							<span>Root_Emitter</span>
							<ul>
								<!--
								<li>Root_Particle</li>
								<li data-options="state:'closed'">
									<span>Photos</span>
									<ul>
										<li>
											<span>Friend</span>
										</li>
										<li>
											<span>Wife</span>
										</li>
										<li>
											<span>Company</span>
										</li>
									</ul>
								</li>
								<li>
									<span>Program Files</span>
									<ul>
										<li>Intel</li>
										<li>Java</li>
										<li>Microsoft Office</li>
										<li>Games</li>
									</ul>
								</li>
								-->
							</ul>
						</li>
					</ul>
				</div>
				<div class="easyui-panel" title="Paritlce Properties" style="padding:5px; width:100%; height:80%;">
					
					<div class="propGroup" style="margin-bottom:10px;">
						<div class="particle_title" style="float:left; margin-right:20px;">Name: <span style="color:yellow;">AAasdfasdfBB</span></div>
						<a href="#" class="easyui-linkbutton" >Rename</a>
					</div>
					
					<div class="propGroup">
						<div class="prop">
							<div class="lbl_prop">life</div><input class="easyui-numberspinner" style="width:80px;"></input>
						</div>
						
						<div class="prop">
							<div class="lbl_prop">mass</div><input class="easyui-numberspinner" style="width:80px;"></input>
						</div>
						<div class="prop">
							<div class="lbl_prop">pos-x</div><input class="easyui-numberspinner" style="width:80px;"></input>
						</div>
						<div class="prop">
							<div class="lbl_prop">pos-y</div><input class="easyui-numberspinner" style="width:80px;"></input>
						</div>
						<div class="prop">
							<div class="lbl_prop">pos-z</div><input class="easyui-numberspinner" style="width:80px;"></input>
						</div>
						<div class="prop">
							<div class="lbl_prop">rot</div><input class="easyui-numberspinner" style="width:80px;"></input>
						</div>
						<div class="prop">
							<div class="lbl_prop">vel-x</div><input class="easyui-numberspinner" style="width:80px;"></input>
						</div>
						<div class="prop">
							<div class="lbl_prop">vel-y</div><input class="easyui-numberspinner" style="width:80px;"></input>
						</div>
						<div class="prop">
							<div class="lbl_prop">vel-z</div><input class="easyui-numberspinner" style="width:80px;"></input>
						</div>
						<div class="prop">
							<div class="lbl_prop">vel-r</div><input class="easyui-numberspinner" style="width:80px;"></input>
						</div>
						<div class="prop">
							<div class="lbl_prop">size-x</div><input class="easyui-numberspinner" style="width:80px;"></input>
						</div>
						<div class="prop">
							<div class="lbl_prop">size-y</div><input class="easyui-numberspinner" style="width:80px;"></input>
						</div>
						<div class="prop">
							<div class="lbl_prop">color</div><input id="cpk_color" type="text" class="hide input_params" value="fe9810"></input>
						</div>
					</div>
					
				</div>
			</div>
			<div data-options="region:'center',title:'Canvas'">
				<div id="canvas_container" style="width:100%; height:100%">
					<canvas id='webgl' width="1920" height="1080"></canvas>
				</div>
			</div>
		</div>
		
		<!-- menu data -->
		<div id="menu_particleTree">
			<div id="btn_addParticle" data-options="iconCls:'icon-add'" onclick="window.onHtmlClick(this)">Add Particle</div>
			<div id="btn_addEmitter" data-options="iconCls:'icon-add'" onclick="window.onHtmlClick(this)">Add Emitter</div>
			<div id="btn_remove" data-options="iconCls:'icon-remove'" onclick="window.onHtmlClick(this)">Delete</div>
		</div>
		<div id="mm1" style="width:150px;">
			<div data-options="iconCls:'icon-undo'">Undo</div>
			<div data-options="iconCls:'icon-redo'">Redo</div>
			<div class="menu-sep"></div>
			<div>Cut</div>
			<div>Copy</div>
			<div>Paste</div>
			<div class="menu-sep"></div>
			<div>
				<span>Toolbar</span>
				<div>
					<div>Address</div>
					<div>Link</div>
					<div>Navigation Toolbar</div>
					<div>Bookmark Toolbar</div>
					<div class="menu-sep"></div>
					<div>New Toolbar...</div>
				</div>
			</div>
			<div data-options="iconCls:'icon-remove'">Delete</div>
			<div>Select All</div>
		</div>
		<div id="mm2" style="width:100px;">
			<div>Help</div>
			<div>Update</div>
			<div>About</div>
		</div>
		<div id="mm3" class="menu-content" style="background:#f0f0f0;padding:10px;text-align:left">
			<img src="http://www.jeasyui.com/images/logo1.png" style="width:150px;height:50px">
			<p style="font-size:14px;color:#444;">Try jQuery EasyUI to build your modern, interactive, javascript applications.</p>
		</div>
		
		<!-- 不知道怎麼在tree_particle 上用 -->
		<!--
		<div id="menu_particleTree" class="easyui-menu" style="width:120px;">
			<div onclick="javascript:alert('new')">New Particle</div>
			<div>
				<span>Open</span>
				<div style="width:150px;">
					<div><b>Word</b></div>
					<div>Excel</div>
					<div>PowerPoint</div>
					<div>
						<span>M1</span>
						<div style="width:120px;">
							<div>sub1</div>
							<div>sub2</div>
							<div>
								<span>Sub</span>
								<div style="width:80px;">
									<div onclick="javascript:alert('sub21')">sub21</div>
									<div>sub22</div>
									<div>sub23</div>
								</div>
							</div>
							<div>sub3</div>
						</div>
					</div>
					<div>
						<span>Window Demos</span>
						<div style="width:120px;">
							<div data-options="href:'window.html'">Window</div>
							<div data-options="href:'dialog.html'">Dialog</div>
							<div><a href="http://www.jeasyui.com" target="_blank">EasyUI</a></div>
						</div>
					</div>
				</div>
			</div>
			<div data-options="iconCls:'icon-save'">Save</div>
			<div data-options="iconCls:'icon-print',disabled:true">Print</div>
			<div class="menu-sep"></div>
			<div>Exit</div>
		</div>
		-->
		
	</body>
	<script src='res/js/lib/async.js'></script>
	<script src='res/js/lib/rx.all.min.js'></script>
	<script src='res/js/lib/three.min.js'></script>
	<script src='res/js/lib/underscore-min.js'></script>
	<script src='res/js/common.js'></script>
	<script src="res/js/haxe.js"></script>
	<script src='res/cljs/goog/base.js'></script>
	<script src='res/cljs/cljs.js'></script>
	<script>
	$("#cpk_color").spectrum({
		color: "#f00"
	});
	
	common.onModel.subscribe(function(data){
		//console.log( data )
	})
	
	common.onView.subscribe(function(data){
		//console.log( data )
	})
	
	common.onModel.onNext(['testmodel', {}])
	common.onView.onNext(['testview', {}])
	
	</script>
	<script>
	//測試用讀取資料
	var testLoadData = { 	id:'root', 
							lifetime:10,
							emit: { prototype:[ { id:'root_particle', lifetime:1, vel:[50, 0, 0] }, { id:'root_particle2', emit: { prototype:[ { id:'a_particle', lifetime:1, vel:[50, 0, 0] }, { id:'a_particle2', lifetime:1, vel:[50, 0, 0] } ] }, lifetime:1, vel:[50, 0, 0] } ] }, 
							pos:[0, 0, 0], vel:[0, 0, 0] }
	
	
	goog.require("app.main2");
	window.haxeStart();
	</script>
	<!-- script test -->
	<script>
	
	//不知道怎麼在tree_particle 上用
	/*
	$('#tree_particle').bind('contextmenu',function(e){
                e.preventDefault();
                $('#menu_particleTree').menu('show', {
                    left: e.pageX,
                    top: e.pageY
                });
            });
			*/
	/*
	$('#tree_particle').tree({
		onClick: function(node){
			alert(node.text);  // alert node text property when clicked
		},
		onDrop:function( target,source,point ){
			console.log( target );
			console.log( source );
			console.log( point );
		
		}
	});
	*/
	</script>
</html>