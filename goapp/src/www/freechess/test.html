<script type="text/javascript" src="js/api.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/node-uuid/1.4.8/uuid.min.js"></script>
<script type="text/javascript" src="../common/js/lib/jquery-easyui-1.4.3/jquery.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
<script type="text/javascript" src="../common/js/lib/leo.utils.js"></script>
<script src="../common/js/admin.js"></script>
<script>admin.init()</script>
<script>
    api.insertServiceCallback((err, data) => {
        console.log("AOP ", err, data)
    })

    const player = "han"
    console.log("player ", player)

    api.context((err, data) => {
        console.log(err, data)
        if (err) {
            return;
        }
        console.log(api.getRandomFourRoom(data, "han"))

        api.quickCreateGame(
            "ooxx",
            player,
            msg => {
                console.log(player+" msg", msg)
                if(msg.game){
                    // updateGame(msg.game.id, msg.game)
                }
            },
            (isSuccess, info) => {
                console.log(player + " target alive ", isSuccess, info)
            },
            (err, data, game) => {
                console.log(err, data)
                if (err) {
                    return;
                }
                console.log(api.getGameById(data, game.id))

                api.quickJoin(
                    game.id,
                    "vic",
                    false,
                    msg => {
                        console.log("msg", msg)
                    },
                    (isSuccess, info) => {
                        console.log("target alive ", isSuccess, info)
                    },
                    (err, info) => {
                        console.log(err, info)
                        api.quickPut(game.id, player, [0, 1], (err, info) => {
                            console.log(err, info)
                        })
                        api.quickPut(game.id, player, [0, 2], (err, info) => {
                            console.log(err, info)
                        })
                        api.quickPut(game.id, "vic", [1, 1], (err, info) => {
                            console.log(err, info)
                        })
                        api.quickPut(game.id, "vic", [2, 1], (err, info) => {
                            console.log(err, info)
                        })
                    })

                setTimeout(() => {
                    console.log("leave")
                    api.quickLeave(game.id, "vic", (err, info) => {
                        console.log(err, info)
                    })
                }, 1000 * 20)
            }
        )
    })
</script>