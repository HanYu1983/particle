<script type="text/javascript" src="js/api.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/node-uuid/1.4.8/uuid.min.js"></script>
<script type="text/javascript" src="../common/js/lib/jquery-easyui-1.4.3/jquery.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
<script type="text/javascript" src="../common/js/lib/leo.utils.js"></script>
<script src="../common/js/admin.js"></script>
<script>admin.init()</script>
<script>


    const player = api.getUUID();
    api.context((err, data) => {
        console.log(err, data)
        if (err) {
            return;
        }
        console.log(api.getRandomFourRoom(data))

        api.createGame("ooxx", player, (err, data, game) => {
            console.log(err, data)
            if (err) {
                return;
            }

            api.quickJoin(
                game.id,
                "vic",
                false,
                msg => {
                    console.log("msg", msg)
                },
                (isSuccess, info) => {
                    console.log("target alive ", isSuccess, info)
                },
                (err, info) => {
                    console.log(err, info)
                    api.quickPut(game.id, player, [0, 1], (err, info) => {
                        console.log(err, info)
                    })
                })

            setTimeout(()=>{
                console.log("leave")
                api.quickLeave(game.id, "vic", (err, info)=>{
                    console.log(err, info)
                })
            }, 1000*20)
            /*
            api.joinGame(game.id, "vic", (err, game) => {
                console.log(err, game)
                if (err) {
                    return;
                }
                console.log("isFirst ", api.isFirst(game, { type: "0" }))
                console.log("isMyTurn ", api.isMyTurn(game, player))
                api.put(game.id, player, [0, 0], (err, game) => {
                    console.log(err, game)
                    if (err) {
                        return;
                    }
                    console.log("isFirst ", api.isFirst(game, { type: "0" }))
                    console.log("isMyTurn ", api.isMyTurn(game, player))
                    api.put(game.id, "vic", [1, 1], (err, game) => {
                        console.log(err, game)
                        if (err) {
                            return;
                        }
                    })
                })
            })*/
        })
    })
</script>