<!DOCTYPE html>
<html>
	<style>
	body{
		margin:0;
		overflow:hidden;
	}
	.relative{
		position:relative;
	}
	.absolute{
		position:absolute;
	}
	.top_left{
		left:0;
		top:0;
	}
	.full{
		width:100%;
		height:100%;
	}
	.group{
		position:relative;
		width:100%;
	}
	.hori{
		display:inline-block;
	}
	.horiCenter{
		text-align:center;
	}
	.hide{
		display:none;
	}
	.roomButton{
		width:95%;
	}
	</style>
	<body class="easyui-layout">
		
		<div data-options="region:'west',title:'West',split:false" style="width:300px;">
			<div id="acc_leftPanel" class="easyui-accordion" data-options="multiple:true" style="width:100%;">
				<div title="卡片詳情" data-options="iconCls:'icon-save',selected:true" style="padding:10px;">
					<div class="group hori">
						<a id="btn_login" href="#" class="easyui-linkbutton menuButton" >login</a>
						<input id="txt_id" class="easyui-textbox"  style="">
					</div>
					<div class="group hori">
						<a id="btn_create" href="#" class="easyui-linkbutton menuButton" >create</a>
						<input id="chk_pri" class="easyui-switchbutton" data-options="onText:'Pri',offText:'Pub'">
						<input id="txt_roomName" class="easyui-textbox"  style="">
					</div>
					<div class="group hori">
						<a id="btn_enter" href="#" class="easyui-linkbutton menuButton" >enter</a>
						<input id="txt_enterName" class="easyui-textbox"  style="">
					</div>
				</div>
				<div id="div_container" title="指令" data-options="iconCls:'icon-reload',selected:true" style="padding:10px;">
					
				</div>
			</div>
		</div>
		<div data-options="region:'center',title:'center title'">
			
		</div>
		
		<div id="dia_command" class="easyui-dialog" title="邀戰通知" data-options="iconCls:'icon-help',closed:true" style="width:300px; padding:10px">
			<div class="group" style="text-align:center;">
				<div id="txt_from" style="color:yellow;"></div>
				<div >要求連線對戰！要求對象：</div>
				<div id="txt_output" style="color:yellow;"></div>
				<br/>
				<a id="btn_receive" href="#" class="easyui-linkbutton" style="width:60px; height:40px; " data-options="iconCls:'icon-ok', disabled:false">連線</a>
			</div>
		</div>
	
		<link rel="stylesheet" type="text/css" href="../common/js/lib/jquery-easyui-1.4.3/themes/black/easyui.css">
		<link rel="stylesheet" type="text/css" href="../common/js/lib/jquery-easyui-1.4.3/themes/icon.css">
		<link rel="stylesheet" type="text/css" href="../common/js/lib/jquery-easyui-1.4.3/themes/color.css">
		<link rel="stylesheet" type="text/css" href="../common/css/normalize.css">
			
		<script src='https://cdnjs.cloudflare.com/ajax/libs/ramda/0.21.0/ramda.min.js'></script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.26/vue.min.js'></script>
		<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/rxjs/4.1.0/rx.all.min.js'></script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js'></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/async/2.1.4/async.min.js"></script>
		
		<script type="text/javascript" src="../common/js/lib/jquery-easyui-1.4.3/jquery.min.js"></script>
		<script type="text/javascript" src="../common/js/lib/jquery-easyui-1.4.3/jquery.easyui.min.js"></script>
		<script type="text/javascript" src="../common/js/lib/jquery/jquery.cookie.js"></script>
		<script type="text/javascript" src="../common/js/lib/jquery/jquery.tmpl.min.js"></script>
		<script src="js/vic.tools.js"></script>
		
		<script>
		var global = global || {};
		global.onModel = new Rx.Subject
		global.onView = new Rx.Subject
		
		$(document).ready( initPage );
		
		function initPage(){
			var btn_login = $("#btn_login" );
			var btn_create = $("#btn_create" );
			var btn_enter = $("#btn_enter" );
			var txt_id = $("#txt_id" );
			var txt_roomName = $("#txt_roomName" );
			var txt_enterName = $("#txt_enterName" );
			var chk_pri = $("#chk_pri" );
			var div_container = $("#div_container" );
			var needPrivate = false;
			var acc_leftPanel = $("#acc_leftPanel" );
			
			
			//test create room
			listRoom( ['d', 'g' ] );
			
			chk_pri.switchbutton({
				onChange:function( chk ){
					pri = chk;
				}
			});
			
			btn_login.linkbutton({
				onClick:function(){
					var id = txt_id.textbox( 'getValue' );
					if( id != '' ){
						// call login
						console.log( id );
					}
				}
			});
			btn_create.linkbutton({
				onClick:function(){
					var roomName = txt_roomName.textbox( 'getValue' );
					if( roomName != '' ){
						// call create room
						
						console.log( roomName );
						console.log( needPrivate );
					}
				}
			});
			btn_enter.linkbutton({
				onClick:function(){
					var enterName = txt_enterName.textbox( 'getValue' );
					if( enterName != '' ){
						console.log( enterName );
						// enter target room
					}else{
						// auto room
					}
				}
			});
			
			
			function listRoom( ary_room ){
				acc_leftPanel.accordion( 'select', 1 );
				div_container.empty();
				for( var i = 0; i < ary_room.length; ++i ){
					var roomButton = $('<a href="#" class="easyui-linkbutton roomButton" >' + ary_room[i] + '</a>' );
					roomButton.attr( 'roomId', ary_room[i] );
					roomButton.linkbutton( {
						onClick:function(){
							var roomId = $(this).attr('roomId');
							console.log( roomId );
						}
					});
					div_container.append( roomButton );
				}
			}
		}
		</script>
		
		<script name="test">
		global.onModel.subscribe(
			function(cmd){
			
				var name = cmd[0];
				var params = cmd[1];
				
				switch( name ){
					case 'init':
						break;
					case 'updateCursor':
						
						break;
					case 'update':
						
						break;
				}
			},
			function(err){
				console.log(err)
			},
			function(){
				
			}
		)
		global.onView.subscribe(
			function(cmd){
				console.log(cmd)
			},
			function(err){
				console.log(err)
			},
			function(){
				
			}
		)
		global.onModel.onNext(['start from html',0])
		global.onView.onNext(['start from html',0])
		</script>
	</body>
</html>